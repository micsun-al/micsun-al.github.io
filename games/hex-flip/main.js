(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,i){"use strict";t.__esModule=!0;var n,s=i(774);t.ALSheets={main:{ID:"main",IMAGE:"assets/sheets/main.png",DATA:"assets/sheets/main.json"}},t.ALKeys={TILES_KEY:"TILES_KEY"},t.ALTileAction={INVALID:"INVALID",STANDARD:"STANDARD",BUMPER:"BUMPER",JUMP:"JUMP",END:"END"},function(e){e[e.NW=0]="NW",e[e.N=1]="N",e[e.NE=2]="NE",e[e.SW=3]="SW",e[e.S=4]="S",e[e.SE=5]="SE",e[e.W=6]="W",e[e.E=7]="E"}(n=t.ALDirection||(t.ALDirection={})),t.ALTile={NONE:new s.ALTileData(""),BUMPER:new s.ALTileData("bumper",t.ALTileAction.BUMPER),CHECKPOINT:new s.ALTileData("checkpoint",t.ALTileAction.STANDARD),EMPTY:new s.ALTileData("empty",t.ALTileAction.INVALID,{instanced:!0}),END:new s.ALTileData("end",t.ALTileAction.STANDARD),GENERAL:new s.ALTileData("general",t.ALTileAction.STANDARD,{instanced:!0}),GOAL:new s.ALTileData("goal",t.ALTileAction.STANDARD),HAMMER_N:new s.ALTileData("hammer_n",t.ALTileAction.INVALID,{model:"hammer",rotation:0,direction:n.N}),HAMMER_NE:new s.ALTileData("hammer_ne",t.ALTileAction.INVALID,{model:"hammer",rotation:1*Math.PI/3,direction:n.NE}),HAMMER_NW:new s.ALTileData("hammer_nw",t.ALTileAction.INVALID,{model:"hammer",rotation:-1*Math.PI/3,direction:n.NW}),HAMMER_S:new s.ALTileData("hammer_s",t.ALTileAction.INVALID,{model:"hammer",rotation:Math.PI,direction:n.S}),HAMMER_SE:new s.ALTileData("hammer_se",t.ALTileAction.INVALID,{model:"hammer",rotation:2*Math.PI/3,direction:n.SE}),HAMMER_SW:new s.ALTileData("hammer_sw",t.ALTileAction.INVALID,{model:"hammer",rotation:-2*Math.PI/3,direction:n.SW}),JUMP_N:new s.ALTileData("jump_n",t.ALTileAction.JUMP,{model:"jump",rotation:0,direction:n.N}),JUMP_NE:new s.ALTileData("jump_ne",t.ALTileAction.JUMP,{model:"jump",rotation:1*Math.PI/3,direction:n.NE}),JUMP_NW:new s.ALTileData("jump_nw",t.ALTileAction.JUMP,{model:"jump",rotation:-1*Math.PI/3,direction:n.NW}),JUMP_S:new s.ALTileData("jump_s",t.ALTileAction.JUMP,{model:"jump",rotation:Math.PI,direction:n.S}),JUMP_SE:new s.ALTileData("jump_se",t.ALTileAction.JUMP,{model:"jump",rotation:2*Math.PI/3,direction:n.SE}),JUMP_SW:new s.ALTileData("jump_sw",t.ALTileAction.JUMP,{model:"jump",rotation:-2*Math.PI/3,direction:n.SW}),START:new s.ALTileData("start",t.ALTileAction.STANDARD,{model:"general"}),TRAP:new s.ALTileData("trap",t.ALTileAction.STANDARD),OUT_OF_BOUNDS:new s.ALTileData("out of bounds")},t.ALRegistryKeys={LEVEL_START_POSITION:"LEVEL_START_POSITION",LEVEL_LAYER:"LEVEL_LAYER",LEVEL_DATA:"LEVEL_DATA",TILES_DATA:"TILES_DATA",COMMON_TILES:"COMMON_TILES",MAIN_3D:"MAIN_3D",MAIN_PHASER:"MAIN_PHASER",PLAYER_ROW:"PLAYER_ROW",PLAYER_COL:"PLAYER_COL",PLAYER_TILE:"PLAYER_TILE",PLAYER_TILE_ACTION:"PLAYER_TILE_ACTION",PLAYER_TRANSFORM:"PLAYER_TRANSFORM",TRAPS:"TRAPS",GOALS:"GOALS",CHECKPOINTS:"CHECKPOINTS",END:"END"},t.ALEvents={MOVE_REQUESTED:"MOVE_REQUESTED",PLAYER_MOVED:"PLAYER_MOVED",REQUEST_PLAYER_FLIP:"REQUEST_PLAYER_FLIP",REFLOW_REQUESTED:"REFLOW_REQUESTED",JUMP_REQUESTED:"JUMP_REQUESTED",REQUEST_PLAYER_RESPAWN:"REQUEST_PLAYER_RESPAWN"},t.ALArt={WIDTH:720,HEIGHT:1280},t.ALGameConsts={TILE_MULTIPLIER:1,TILE_WIDTH:1.52,TILE_HEIGHT:1.75,HALF_TILE_WIDTH:0,HALF_TILE_HEIGHT:0},t.ALGameConsts.HALF_TILE_WIDTH=.5*t.ALGameConsts.TILE_WIDTH,t.ALGameConsts.HALF_TILE_HEIGHT=.5*t.ALGameConsts.TILE_HEIGHT},1696:function(e,t,i){"use strict";t.__esModule=!0;var n=i(1),s=i(234),a=i(1697),o=function(e){function t(t){return e.call(this,{type:s.WEBGL,canvas:document.getElementById("phaser-canvas"),title:"AvatarLabs Hex Flip Prototype",version:"0.0.1",autoFocus:!0,disableContextMenu:!0,render:{transparent:!0,clearBeforeRender:!0,powerPreference:"high-performance"},loader:{crossOrigin:"anonymous",async:!0},scale:{mode:s.Scale.ScaleModes.RESIZE,autoRound:!0,autoCenter:s.Scale.Center.CENTER_BOTH},input:{activePointers:1},scene:[function(){return new a.default(t)}]})||this}return n.__extends(t,e),t}(s.Game);t.default=o},1697:function(e,t,i){"use strict";t.__esModule=!0;var n=i(1),s=i(1698),a=i(1714),o=i(1715),r=i(127),c=i(1716),h=i(172),l=i(234),d=function(e){function t(t){var i=e.call(this,{key:"Main"})||this;return i.dirty=!0,i.initCallback=t,i}return n.__extends(t,e),t.prototype.init=function(){var e=this;this.scale.on(l.Scale.Events.RESIZE,(function(){e.registry.events.emit(r.ALEvents.REFLOW_REQUESTED)})),new o.default(this.registry)},t.prototype.preload=function(){this.load.atlas(r.ALSheets.main.ID,r.ALSheets.main.IMAGE,r.ALSheets.main.DATA),this.load.json(r.ALKeys.TILES_KEY,"assets/data/tiles.json")},t.prototype.create=function(){var e=this;this.containerTopRight=this.add.container(0,0),this.main3d=new s.default(this,this.initCallback),this.registry.set(r.ALRegistryKeys.MAIN_3D,this.main3d),this.mainPlayer=new a.default(this),this.scale.on(l.Scale.Events.RESIZE,this.handleResize,this),this.debugInfo=new c.default(this),h.addAll(this,[this.debugInfo,this.containerTopRight]),h.sceneOnRegistry(this,r.ALEvents.REFLOW_REQUESTED,(function(){e.dirty=!0}))},t.prototype.update=function(){this.debugInfo.update(),this.checkPlayerCollisions(),this.dirty&&this.reflowElements()},t.prototype.checkPlayerCollisions=function(){!this.main3d.player.activeTimeline&&this.registry.get(r.ALRegistryKeys.TRAPS)[this.registry.get(r.ALRegistryKeys.PLAYER_ROW)+"_"+this.registry.get(r.ALRegistryKeys.PLAYER_COL)]&&this.registry.events.emit(r.ALEvents.REQUEST_PLAYER_RESPAWN)},t.prototype.reflowElements=function(){this.dirty=!1,this.containerTopRight.setPosition(this.cameras.main.width,0).setScale(this.cameras.main.height/r.ALArt.HEIGHT)},t.prototype.handleResize=function(e,t,i,n){},t}(l.Scene);t.default=d},1698:function(e,t,i){"use strict";t.__esModule=!0,i(485),i(1699),i(1700);var n=i(1701),s=i(1702),a=i(1703),o=i(1704),r=i(1706),c=i(1707),h=i(1708),l=i(1709),d=function(e,t){var i=this;this.initScene=function(){return i.skybox=new s.default(i.engine),i.ground=new h.default(i.engine),i.player=new c.default(i.engine),i.engine.running=!0,i.camera=new a.default(i.engine),i.level=new l.default(i.engine),i.lights=new n.default(i.engine,[i.player.hexMesh]),i.engine.lightsTransformNode=i.lights.transformNode,i.engine},this.phaserScene=e,this.engine=new o.default(e,this),this.initScene(),this.shadows=new r.default(this.engine),this.engine.runRenderLoop(),t(this.engine),window.engine=this.engine};t.default=d},1701:function(e,t,i){"use strict";t.__esModule=!0;var n=i(0),s=i(111),a=i(38),o=i(151),r=function(e,t){void 0===t&&(t=[]),this.engine=e,this.transformNode=new a.TransformNode("lights_transform_node",e.babylonScene),this.lights=[new o.PointLight("000_lights_pointlight",new n.Vector3(10,-10,-10),this.engine.babylonScene),new s.HemisphericLight("000_lights_hemispheric",new n.Vector3(1,6,0),this.engine.babylonScene)],this.lights[0].intensity=1e3};t.default=r},1702:function(e,t,i){"use strict";t.__esModule=!0;var n=i(8),s=i(35),a=i(113),o=i(7),r=function(e){this.engine=e,this.skybox=n.Mesh.CreateBox("skyBox",100,this.engine.babylonScene),this.skyboxMaterial=new s.StandardMaterial("skyBox",this.engine.babylonScene),this.skyboxMaterial.backFaceCulling=!1,this.skyboxMaterial.disableLighting=!0,this.skybox.material=this.skyboxMaterial,this.skybox.infiniteDistance=!0,this.skyboxMaterial.reflectionTexture=new a.CubeTexture("assets/textures/skybox/skybox",this.engine.babylonScene),this.skyboxMaterial.reflectionTexture.coordinatesMode=o.Texture.SKYBOX_MODE,this.skybox.renderingGroupId=0,this.engine.babylonScene.environmentTexture=this.skyboxMaterial.reflectionTexture};t.default=r},1703:function(e,t,i){"use strict";t.__esModule=!0;var n=i(5),s=i(136),a=function(e,t){void 0===t&&(t=null),this.engine=e,this.target=t,this.camera=new s.ArcRotateCamera("follow-camera",-.5*Math.PI,.225*Math.PI,25.5,n.Vector3.Zero(),this.engine.babylonScene,!0),this.engine.arcRotateCamera=this.camera};t.default=a},1704:function(e,t,i){"use strict";t.__esModule=!0;var n=i(15),s=i(18),a=i(5),o=i(1705),r=i(172),c=i(127),h=function(){function e(e,t){var i=this;this.running=!1,this.main=t,this.canvas=document.getElementById("babylon-canvas"),this.engine=new n.Engine(this.canvas,!0,{stencil:!0}),this.phaserScene=e,this.babylonScene=new s.Scene(this.engine),this.babylonScene.fogMode=s.Scene.FOGMODE_LINEAR,this.babylonScene.fogStart=26,this.babylonScene.fogEnd=35,this.babylonScene.fogColor=a.Color3.FromHexString("#198af8"),this.instances=new o.default,r.sceneOnRegistry(e,c.ALEvents.REFLOW_REQUESTED,(function(){i.handleResizeEvent()}))}return e.prototype.handleResizeEvent=function(){this.engine.resize()},e.prototype.runRenderLoop=function(){this.engine.runRenderLoop(this.render.bind(this))},e.prototype.render=function(){this.running&&this.babylonScene.render()},e}();t.default=h},1705:function(e,t,i){"use strict";t.__esModule=!0;var n=i(36),s=function(){function e(){this.originalMeshes={},this.currentInstanceIndex=0}return e.prototype.requestInstance=function(e,t,i,s,a){var o=this;if(this.originalMeshes[i]){var r=this.originalMeshes[i].instantiateHierarchy();a([r])}else n.SceneLoader.ImportMeshAsync(e,t,i,s).then((function(e){o.originalMeshes[i]=e.meshes[0],e.meshes[0].setEnabled(!1);var t=o.originalMeshes[i].instantiateHierarchy();a([t])}))},e}();t.default=s},1706:function(e,t,i){"use strict";t.__esModule=!0;var n=function(e){this.engine=e};t.default=n},1707:function(e,t,i){"use strict";t.__esModule=!0;var n=i(36),s=i(127),a=i(38),o=i(172),r=i(234),c=function(e){var t=this;this.targetRow=0,this.targetCol=0,this.flipDuration=300,this.xPosition=0,this.zPosition=0,this.xRotation=0,this.yRotation=0,this.zRotation=0,this.handleLoaded=function(e){t.hexTransformNode=e[0].getChildTransformNodes(!0,(function(e){return"0000-player-hex"===e.name}))[0];var i=t.engine.phaserScene.registry.get(s.ALRegistryKeys.LEVEL_START_POSITION);t.hexTransformNode.position.set(i.x,.05,i.z),t.rotationPoint=t.hexTransformNode.getChildTransformNodes(!1,(function(e){return"rotation-point"===e.name}))[0],t.rotationPoint.rotationQuaternion=null,t.hexTransformNode.parent=null,t.hexTransformNode.rotationQuaternion=null,t.cameraLockNode=new a.TransformNode("cameraLockNode",t.engine.babylonScene),t.cameraLockNode.position.set(i.x,.05,i.z),t.engine.arcRotateCamera.lockedTarget=t.cameraLockNode,t.hexMesh=t.hexTransformNode.getChildMeshes(!1,(function(e){return"hex-mesh"===e.name}))[0],t.engine.lightsTransformNode.parent=t.hexTransformNode,t.tilesData=t.engine.phaserScene.registry.get(s.ALRegistryKeys.TILES_DATA)},this.handleInvalidMove=function(e){if(!t.activeTimeline){switch(t.xPosition=0,t.zPosition=0,t.xRotation=0,t.yRotation=0,t.zRotation=0,e.direction){case s.ALDirection.NW:t.xPosition=-1,t.zPosition=1,t.yRotation=-.33333333333*Math.PI;break;case s.ALDirection.NE:t.xPosition=1,t.zPosition=1,t.yRotation=.33333333333*Math.PI;break;case s.ALDirection.SW:t.xPosition=-1,t.zPosition=-1,t.yRotation=-.6666666666*Math.PI;break;case s.ALDirection.SE:t.xPosition=1,t.zPosition=-1,t.yRotation=.6666666666*Math.PI;break;case s.ALDirection.N:t.zPosition=2;break;case s.ALDirection.S:t.zPosition=-2,t.yRotation=Math.PI}t.targetRow=t.engine.phaserScene.registry.get(s.ALRegistryKeys.PLAYER_ROW)+e.r,t.targetCol=t.engine.phaserScene.registry.get(s.ALRegistryKeys.PLAYER_COL)+e.q,t.hexTransformNode.rotation.y=t.yRotation,t.activeTimeline=t.engine.phaserScene.tweens.timeline({duration:.5*t.flipDuration,ease:r.Math.Easing.Quadratic.InOut,yoyo:!0,onComplete:function(){t.activeTimeline=null,t.hexTransformNode.rotation.set(0,0,0)},tweens:[{targets:t.rotationPoint.rotation,props:{x:{from:0,to:.25*Math.PI}}}]})}},this.handleEnd=function(e){t.activeTimeline},this.handleBumperBounce=function(e){if(!t.activeTimeline){switch(t.xPosition=0,t.zPosition=0,t.xRotation=0,t.yRotation=0,t.zRotation=0,e.direction){case s.ALDirection.NW:t.xPosition=-1,t.zPosition=1,t.yRotation=-.33333333333*Math.PI;break;case s.ALDirection.NE:t.xPosition=1,t.zPosition=1,t.yRotation=.33333333333*Math.PI;break;case s.ALDirection.SW:t.xPosition=-1,t.zPosition=-1,t.yRotation=-.6666666666*Math.PI;break;case s.ALDirection.SE:t.xPosition=1,t.zPosition=-1,t.yRotation=.6666666666*Math.PI;break;case s.ALDirection.N:t.zPosition=2;break;case s.ALDirection.S:t.zPosition=-2,t.yRotation=Math.PI;break;case s.ALDirection.W:case s.ALDirection.E:return}t.targetRow=t.engine.phaserScene.registry.get(s.ALRegistryKeys.PLAYER_ROW)+e.r,t.targetCol=t.engine.phaserScene.registry.get(s.ALRegistryKeys.PLAYER_COL)+e.q,t.hexTransformNode.rotation.y=t.yRotation,t.activeTimeline=t.engine.phaserScene.tweens.timeline({onComplete:function(){t.activeTimeline=null,t.hexTransformNode.rotation.set(0,0,0)},tweens:[{duration:.5*t.flipDuration,ease:r.Math.Easing.Quadratic.In,targets:t.rotationPoint.rotation,props:{x:{from:0,to:.7*Math.PI}}},{duration:.5*t.flipDuration,ease:r.Math.Easing.Bounce.Out,targets:t.rotationPoint.rotation,props:{x:{from:.7*Math.PI,to:0}}}]})}},this.handleJump=function(e,i){if(!t.activeTimeline){t.xPosition=0,t.zPosition=0,t.xRotation=0,t.yRotation=0,t.zRotation=0;var n={xPosition:0,zPosition:0,xRotation:0,yRotation:0,zRotation:0,addR:0,addQ:0};switch(e.direction){case s.ALDirection.NW:t.xPosition=-1,t.zPosition=1,t.yRotation=-.33333333333*Math.PI;break;case s.ALDirection.NE:t.xPosition=1,t.zPosition=1,t.yRotation=.33333333333*Math.PI;break;case s.ALDirection.SW:t.xPosition=-1,t.zPosition=-1,t.yRotation=-.6666666666*Math.PI;break;case s.ALDirection.SE:t.xPosition=1,t.zPosition=-1,t.yRotation=.6666666666*Math.PI;break;case s.ALDirection.N:t.zPosition=2;break;case s.ALDirection.S:t.zPosition=-2,t.yRotation=Math.PI}switch(i.direction){case s.ALDirection.NW:n.xPosition=-2,n.zPosition=2,n.yRotation=-.33333333333*Math.PI,n.addR=-2,n.addQ=-1;break;case s.ALDirection.NE:n.xPosition=2,n.zPosition=2,n.yRotation=.33333333333*Math.PI,n.addR=-2,n.addQ=1;break;case s.ALDirection.SW:n.xPosition=-2,n.zPosition=-2,n.yRotation=-.6666666666*Math.PI,n.addR=2,n.addQ=-1;break;case s.ALDirection.SE:n.xPosition=2,n.zPosition=-2,n.yRotation=.6666666666*Math.PI,n.addR=2,n.addQ=1;break;case s.ALDirection.N:n.zPosition=4,n.addR=-4;break;case s.ALDirection.S:n.zPosition=-4,n.yRotation=Math.PI,n.addR=4}t.targetRow=t.engine.phaserScene.registry.get(s.ALRegistryKeys.PLAYER_ROW)+e.r,t.targetCol=t.engine.phaserScene.registry.get(s.ALRegistryKeys.PLAYER_COL)+e.q;var a=t.targetRow+n.addR,o=t.targetCol+n.addQ;t.hexTransformNode.rotation.y=t.yRotation,t.activeTimeline=t.engine.phaserScene.tweens.timeline({tweens:[{offset:0,targets:t.cameraLockNode.position,ease:r.Math.Easing.Quadratic.InOut,duration:t.flipDuration,props:{x:t.hexTransformNode.position.x+s.ALGameConsts.TILE_WIDTH*t.xPosition,z:t.hexTransformNode.position.z+s.ALGameConsts.HALF_TILE_HEIGHT*t.zPosition}},{offset:t.flipDuration,targets:t.cameraLockNode.position,ease:r.Math.Easing.Quadratic.InOut,duration:t.flipDuration,props:{x:t.hexTransformNode.position.x+s.ALGameConsts.TILE_WIDTH*(t.xPosition+n.xPosition),z:t.hexTransformNode.position.z+s.ALGameConsts.HALF_TILE_HEIGHT*(t.zPosition+n.zPosition)}},{offset:0,targets:t.rotationPoint.rotation,ease:r.Math.Easing.Quadratic.InOut,duration:t.flipDuration,props:{x:{from:0,to:Math.PI}},onComplete:function(){t.hexTransformNode.rotation.set(0,0,0),t.engine.phaserScene.registry.set(s.ALRegistryKeys.PLAYER_ROW,t.targetRow),t.engine.phaserScene.registry.set(s.ALRegistryKeys.PLAYER_COL,t.targetCol),t.engine.phaserScene.registry.events.emit(s.ALEvents.PLAYER_MOVED,t.targetRow,t.targetCol),t.rotationPoint.rotation.x=0,t.hexTransformNode.position.x+=s.ALGameConsts.TILE_WIDTH*t.xPosition,t.hexTransformNode.position.z+=s.ALGameConsts.HALF_TILE_HEIGHT*t.zPosition,t.hexTransformNode.rotation.y=n.yRotation,t.engine.phaserScene.registry.events.emit(s.ALEvents.JUMP_REQUESTED,t.targetRow,t.targetCol)}},{offset:t.flipDuration,targets:t.hexTransformNode.rotation,ease:r.Math.Easing.Quadratic.Out,duration:t.flipDuration,props:{x:{from:0,to:3*Math.PI}}},{offset:t.flipDuration,targets:t.hexTransformNode.position,ease:r.Math.Easing.Quadratic.Out,duration:.45*t.flipDuration,props:{y:t.hexTransformNode.position.y+2*s.ALGameConsts.TILE_WIDTH}},{offset:1.45*t.flipDuration,targets:t.hexTransformNode.position,ease:r.Math.Easing.Bounce.Out,duration:.55*t.flipDuration,props:{y:t.hexTransformNode.position.y}},{offset:t.flipDuration,targets:t.hexTransformNode.position,ease:r.Math.Easing.Quadratic.Out,duration:t.flipDuration,props:{x:t.hexTransformNode.position.x+s.ALGameConsts.TILE_WIDTH*(t.xPosition+n.xPosition),z:t.hexTransformNode.position.z+s.ALGameConsts.HALF_TILE_HEIGHT*(t.zPosition+n.zPosition)},onComplete:function(){t.activeTimeline=null,t.hexTransformNode.rotation.set(0,0,0),t.engine.phaserScene.registry.set(s.ALRegistryKeys.PLAYER_ROW,a),t.engine.phaserScene.registry.set(s.ALRegistryKeys.PLAYER_COL,o),t.engine.phaserScene.registry.events.emit(s.ALEvents.PLAYER_MOVED,a,o)}}]})}},this.handleStandardFlip=function(e){if(!t.activeTimeline){switch(t.xPosition=0,t.zPosition=0,t.xRotation=0,t.yRotation=0,t.zRotation=0,e.direction){case s.ALDirection.NW:t.xPosition=-1,t.zPosition=1,t.yRotation=-.33333333333*Math.PI;break;case s.ALDirection.NE:t.xPosition=1,t.zPosition=1,t.yRotation=.33333333333*Math.PI;break;case s.ALDirection.SW:t.xPosition=-1,t.zPosition=-1,t.yRotation=-.6666666666*Math.PI;break;case s.ALDirection.SE:t.xPosition=1,t.zPosition=-1,t.yRotation=.6666666666*Math.PI;break;case s.ALDirection.N:t.zPosition=2;break;case s.ALDirection.S:t.zPosition=-2,t.yRotation=Math.PI}t.targetRow=t.engine.phaserScene.registry.get(s.ALRegistryKeys.PLAYER_ROW)+e.r,t.targetCol=t.engine.phaserScene.registry.get(s.ALRegistryKeys.PLAYER_COL)+e.q,t.hexTransformNode.rotation.y=t.yRotation,t.activeTimeline=t.engine.phaserScene.tweens.timeline({onComplete:function(){t.activeTimeline=null,t.hexTransformNode.rotation.set(0,0,0),t.engine.phaserScene.registry.set(s.ALRegistryKeys.PLAYER_ROW,t.targetRow),t.engine.phaserScene.registry.set(s.ALRegistryKeys.PLAYER_COL,t.targetCol),t.engine.phaserScene.registry.events.emit(s.ALEvents.PLAYER_MOVED,t.targetRow,t.targetCol),t.rotationPoint.rotation.x=0,t.hexTransformNode.position.x+=s.ALGameConsts.TILE_WIDTH*t.xPosition,t.hexTransformNode.position.z+=s.ALGameConsts.HALF_TILE_HEIGHT*t.zPosition},tweens:[{targets:t.cameraLockNode.position,ease:r.Math.Easing.Quadratic.InOut,duration:1.1*t.flipDuration,props:{x:t.hexTransformNode.position.x+s.ALGameConsts.TILE_WIDTH*t.xPosition,z:t.hexTransformNode.position.z+s.ALGameConsts.HALF_TILE_HEIGHT*t.zPosition}},{offset:0,targets:t.rotationPoint.rotation,ease:r.Math.Easing.Quadratic.InOut,duration:t.flipDuration,props:{x:{from:0,to:Math.PI}}}]})}},this.requestRespawn=function(){var e=r.Math.Between(1e3,1500),i=[r.Math.Easing.Quadratic.Out,r.Math.Easing.Quintic.Out,r.Math.Easing.Back.Out,r.Math.Easing.Elastic.Out],n=t.engine.phaserScene.registry.get(s.ALRegistryKeys.LEVEL_START_POSITION);t.activeTimeline=t.engine.phaserScene.tweens.timeline({onComplete:function(){t.activeTimeline=null,t.hexTransformNode.rotation.set(0,0,0),t.engine.phaserScene.registry.events.emit(s.ALEvents.PLAYER_MOVED,n.r,n.q),t.engine.phaserScene.registry.set(s.ALRegistryKeys.PLAYER_COL,n.q),t.engine.phaserScene.registry.set(s.ALRegistryKeys.PLAYER_ROW,n.r)},tweens:[{offset:0,targets:t.hexTransformNode.rotation,ease:r.Utils.Array.GetRandom(i),duration:e,props:{y:{from:Math.PI*r.Utils.Array.GetRandom([-4,-3,3,4]),to:0}}},{offset:0,targets:t.hexTransformNode.scaling,ease:r.Math.Easing.Quadratic.Out,duration:.4*e,props:{x:.2,y:.2,z:.2}},{offset:.4*e,targets:t.hexTransformNode.scaling,ease:r.Math.Easing.Elastic.Out,duration:.6*e,props:{x:1,y:1,z:1}},{offset:0,targets:t.hexTransformNode.position,ease:r.Math.Easing.Quadratic.Out,duration:.4*e,props:{y:5}},{offset:.4*e,targets:t.hexTransformNode.position,ease:r.Math.Easing.Bounce.Out,duration:.6*e,props:{y:0}},{offset:0,targets:[t.hexTransformNode.position,t.cameraLockNode.position],ease:r.Math.Easing.Quadratic.InOut,duration:e,props:{x:n.x,z:n.z}}]})},this.engine=e,o.sceneOnRegistry(e.phaserScene,s.ALTileAction.STANDARD,this.handleStandardFlip),o.sceneOnRegistry(e.phaserScene,s.ALTileAction.BUMPER,this.handleBumperBounce),o.sceneOnRegistry(e.phaserScene,s.ALTileAction.INVALID,this.handleInvalidMove),o.sceneOnRegistry(e.phaserScene,s.ALTileAction.JUMP,this.handleJump),o.sceneOnRegistry(e.phaserScene,s.ALTileAction.END,this.handleEnd),o.sceneOnRegistry(e.phaserScene,s.ALEvents.REQUEST_PLAYER_RESPAWN,this.requestRespawn),n.SceneLoader.ImportMeshAsync("0000-player-hex","assets/models/","hex_player.glb",this.engine.babylonScene).then((function(e){t.handleLoaded(e.meshes)}))};t.default=c},1708:function(e,t,i){"use strict";t.__esModule=!0;var n=i(8),s=i(35),a=i(7),o=i(127),r=i(172),c=function(e){var t=this;this.engine=e,this.mesh=n.Mesh.CreateGround("ground",20*o.ALGameConsts.TILE_WIDTH,20*o.ALGameConsts.TILE_HEIGHT,0,e.babylonScene,!0),r.sceneWatchRegistry(this.engine.phaserScene,o.ALRegistryKeys.LEVEL_START_POSITION,(function(e,i,n){t.mesh.position.set(i.x,-8,i.z)})),this.mesh.scaling.setAll(2);var i=new s.StandardMaterial("ground_material",this.engine.babylonScene),c=["albedo","ao","normal"];["diffuse","ambient","bump"].forEach((function(e,n){i[e+"Texture"]=new a.Texture("assets/textures/ground/ground_"+c[n]+".jpg",t.engine.babylonScene,!1);var s=i[e+"Texture"];s.uScale=s.vScale=50})),this.mesh.material=i};t.default=c},1709:function(e,t,i){"use strict";t.__esModule=!0,i(1710);var n=i(1712),s=i(5),a=i(127),o=i(1713),r=function(e){var t,i=this;this.engine=e,this.tileMapLevel=TileMaps.level_00,this.layer=this.tileMapLevel.layers[0],this.data=this.layer.data,this.tilesData=new o.default(e),this.engine.phaserScene.registry.set(a.ALRegistryKeys.COMMON_TILES,this.tilesData);for(var r=0,c=this.layer.height;r<c;r++)for(var h=function(o,c){t=l.data[r*l.layer.width+o];var h=l.tilesData.rawData.tiles.filter((function(e){return e.id===t-1}))[0].id,d=Object.keys(l.tilesData.list).filter((function(e){return i.tilesData.list[e].id===h}))[0];switch(new n.default("hex_"+(r<10?"0"+r:r)+"_"+(o<10?"0"+o:o)+"_"+(l.tilesData.list[d].model||d),e,"hex_"+(l.tilesData.list[d].model||d),new s.Vector3((o+(r%2==0?0:.5))*a.ALGameConsts.TILE_WIDTH*2,0,-r*a.ALGameConsts.HALF_TILE_HEIGHT),l.tilesData.list[d].rotation||0,l.tilesData.list[d].instanced||!1,r,o,l.tilesData.list[d].direction),d){case a.ALTile.START.key:l.engine.phaserScene.registry.set(a.ALRegistryKeys.LEVEL_START_POSITION,{x:(o+(r%2==0?0:.5))*a.ALGameConsts.TILE_WIDTH*2,z:-r*a.ALGameConsts.HALF_TILE_HEIGHT,r:r,q:o});break;case a.ALTile.GOAL.key:l.engine.phaserScene.registry.get(a.ALRegistryKeys.GOALS)[r+"_"+o]=!1}},l=this,d=0,g=this.layer.width;d<g;d++)h(d);this.engine.phaserScene.registry.set(a.ALRegistryKeys.LEVEL_LAYER,this.layer),this.engine.phaserScene.registry.set(a.ALRegistryKeys.LEVEL_DATA,this.data)};t.default=r},1710:function(e,t,i){(function(e){var t;t={compressionlevel:0,editorsettings:{export:{format:"js",target:"level_00.js"}},height:28,hexsidelength:0,infinite:!1,layers:[{data:[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,10,3,3,3,3,3,3,4,1,3,3,3,3,11,5,1,3,3,3,3,3,5,6,1,3,3,3,14,20,20,3,3,3,3,1,5,5,15,3,3,3,5,9,20,3,3,3,3,17,2,5,12,3,3,3,5,20,5,1,3,3,3,6,5,15,5,3,3,11,20,5,5,3,3,3,14,5,20,14,3,3,3,5,5,6,3,3,3,3,8,5,5,3,3,3,3,3,19,3,3,3,3,3,3,1,1,3,3,3,3,3,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],height:28,id:1,name:"Tile Layer 1",opacity:1,type:"tilelayer",visible:!0,width:7,x:0,y:0}],nextlayerid:2,nextobjectid:1,orientation:"hexagonal",renderorder:"right-down",staggeraxis:"y",staggerindex:"odd",tiledversion:"1.3.1",tileheight:44,tilesets:[{firstgid:1,source:"../../assets/data/tiles.json"}],tilewidth:90,type:"map",version:1.2,width:7},"undefined"==typeof onTileMapLoaded?("undefined"==typeof TileMaps&&(TileMaps={}),TileMaps.level_00=t):onTileMapLoaded("level_00",t),e&&e.exports&&(e.exports=t)}).call(this,i(1711)(e))},1712:function(e,t,i){"use strict";t.__esModule=!0;var n=i(36),s=i(5),a=i(172),o=i(127),r=i(234),c=function(e,t,i,c,h,l,d,g,L){var A=this;void 0===c&&(c=s.Vector3.Zero()),void 0===h&&(h=0),void 0===l&&(l=!1),void 0===d&&(d=0),void 0===g&&(g=0),void 0===L&&(L=o.ALDirection.N),this.handleLoaded=function(e){var t,i;switch(A.mesh=e[0],A.mesh.name=A.name,A.mesh.position=A.position,A.mesh.rotationQuaternion=null,A.mesh.rotation.y=A.rotationY,A.fileName){case"hex_hammer":t=A.mesh.getChildren()[0].getChildren((function(e){return"hammer"===e.id}))[0];var n={r:0,q:0},s=A.r%2==0;switch(A.direction){case o.ALDirection.NW:n.q=s?-1:0,n.r=-1;break;case o.ALDirection.NE:n.q=s?0:1,n.r=-1;break;case o.ALDirection.SW:n.q=s?-1:0,n.r=1;break;case o.ALDirection.SE:n.q=s?0:1,n.r=1;break;case o.ALDirection.N:n.q=0,n.r=-2;break;case o.ALDirection.S:n.q=0,n.r=2}t.rotationQuaternion=null,i=r.Math.Between(2e3,3500),t.rotation.x=.05*Math.PI,A.engine.phaserScene.time.delayedCall(r.Math.Between(0,3500),(function(){A.engine.phaserScene.tweens.timeline({targets:t.rotation,loop:-1,tweens:[{offset:0,ease:r.Math.Easing.Bounce.Out,easeParams:[r.Math.Between(1,10)],duration:.1*i,props:{x:{start:.05*Math.PI,to:-.5*Math.PI}}},{offset:.12*i,ease:r.Math.Easing.Back.Out,easeParams:[1],duration:.3*i,props:{x:{from:-.5*Math.PI,to:.05*Math.PI}}},{offset:.05*i,onComplete:function(){A.engine.phaserScene.registry.get(o.ALRegistryKeys.TRAPS)[A.r+n.r+"_"+(A.q+n.q)]=!0}},{offset:.15*i,onComplete:function(){A.engine.phaserScene.registry.get(o.ALRegistryKeys.TRAPS)[A.r+n.r+"_"+(A.q+n.q)]=!1}},{offset:i}]})}));break;case"hex_trap":i=r.Math.Between(1e3,2e3),(t=A.mesh.getChildren()[0].getChildren((function(e){return"spike"===e.id}))[0].position).y=-.7,A.engine.phaserScene.time.delayedCall(r.Math.Between(0,1e3),(function(){A.engine.phaserScene.tweens.timeline({targets:t,loop:-1,loopDelay:r.Math.Between(1500,2500),tweens:[{offset:0,props:{y:{start:-.7,to:.4}},duration:.25*i,ease:r.Math.Easing.Back.Out},{offset:.255*i,props:{y:-.7},duration:.15*i,ease:r.Math.Easing.Back.In},{offset:.05*i,onComplete:function(){A.engine.phaserScene.registry.get(o.ALRegistryKeys.TRAPS)[A.r+"_"+A.q]=!0}},{offset:.26*i,onComplete:function(){A.engine.phaserScene.registry.get(o.ALRegistryKeys.TRAPS)[A.r+"_"+A.q]=!1}}]})}));break;case"hex_goal":(t=A.mesh.getChildren()[0].getChildren((function(e){return"ball"===e.id}))[0]).rotationQuaternion=null,A.engine.phaserScene.tweens.timeline({targets:t.position,loop:-1,tweens:[{yoyo:!0,ease:r.Math.Easing.Quadratic.InOut,duration:r.Math.Between(1e3,3e3),props:{y:1}}]}),A.engine.phaserScene.tweens.timeline({targets:t.rotation,loop:-1,tweens:[{duration:r.Math.Between(5e3,12e3),props:{y:{start:0,to:Math.PI*r.Utils.Array.GetRandom([-2,2])}}}]}),a.sceneOnRegistry(A.engine.phaserScene,o.ALEvents.PLAYER_MOVED,(function(e,i){A.r!==e||A.q!==i||A.engine.phaserScene.registry.get(o.ALRegistryKeys.GOALS)[A.r+"_"+A.q]||(A.engine.phaserScene.registry.get(o.ALRegistryKeys.GOALS)[A.r+"_"+A.q]=!0,A.engine.phaserScene.tweens.timeline({targets:t.scaling,tweens:[{ease:r.Math.Easing.Back.In,duration:r.Math.Between(200,500),props:{x:0,y:0,z:0}}]}))}));break;case"hex_jump":(t=A.mesh.getChildren()[0].getChildren((function(e){return"hinge"===e.id}))[0]).rotationQuaternion=0;var c=Math.PI*r.Math.FloatBetween(-.2,-.1);a.sceneOnRegistry(A.engine.phaserScene,o.ALEvents.JUMP_REQUESTED,(function(e,i){e===A.r&&i===A.q&&A.engine.phaserScene.tweens.timeline({targets:t.rotation,tweens:[{duration:r.Math.Between(100,200),ease:r.Math.Easing.Bounce.Out,props:{x:{start:0,to:c}}},{delay:r.Math.Between(20,80),duration:r.Math.Between(500,700),ease:r.Math.Easing.Bounce.Out,props:{x:{from:c,to:0}}}]})}));break;case"hex_checkpoint":(t=A.mesh.getChildren()[0].getChildren((function(e){return"check"===e.id}))[0]).rotationQuaternion=null,A.engine.phaserScene.tweens.timeline({targets:t.position,loop:-1,tweens:[{yoyo:!0,ease:r.Math.Easing.Quadratic.InOut,duration:r.Math.Between(1e3,3e3),props:{y:.2}}]}),A.engine.phaserScene.tweens.timeline({targets:t.rotation,loop:-1,tweens:[{duration:r.Math.Between(5e3,12e3),props:{y:{start:0,to:Math.PI*r.Utils.Array.GetRandom([-2,2])}}}]}),a.sceneOnRegistry(A.engine.phaserScene,o.ALEvents.PLAYER_MOVED,(function(e,i){A.r!==e||A.q!==i||A.engine.phaserScene.registry.get(o.ALRegistryKeys.CHECKPOINTS)[A.r+"_"+A.q]||(A.engine.phaserScene.registry.get(o.ALRegistryKeys.CHECKPOINTS)[A.r+"_"+A.q]=!0,A.engine.phaserScene.registry.set(o.ALRegistryKeys.LEVEL_START_POSITION,{x:(i+(e%2==0?0:.5))*o.ALGameConsts.TILE_WIDTH*2,z:-e*o.ALGameConsts.HALF_TILE_HEIGHT,r:e,q:i}),A.engine.phaserScene.tweens.timeline({targets:t.scaling,tweens:[{ease:r.Math.Easing.Back.In,duration:r.Math.Between(200,500),props:{x:0,y:0,z:0}}]}))}));break;case"hex_end":(t=A.mesh.getChildren()[0].getChildren((function(e){return"arrow"===e.id}))[0]).rotationQuaternion=null,A.engine.phaserScene.tweens.timeline({targets:t.position,loop:-1,tweens:[{yoyo:!0,ease:r.Math.Easing.Quadratic.InOut,duration:r.Math.Between(1e3,3e3),props:{y:.2}}]}),A.engine.phaserScene.tweens.timeline({targets:t.rotation,loop:-1,tweens:[{duration:r.Math.Between(5e3,12e3),props:{y:{start:0,to:Math.PI*r.Utils.Array.GetRandom([-2,2])}}}]}),a.sceneOnRegistry(A.engine.phaserScene,o.ALEvents.PLAYER_MOVED,(function(e,i){A.r!==e||A.q!==i||A.engine.phaserScene.registry.get(o.ALRegistryKeys.END)[A.r+"_"+A.q]||(A.engine.phaserScene.registry.get(o.ALRegistryKeys.END)[A.r+"_"+A.q]=!0,A.engine.phaserScene.tweens.timeline({targets:t.scaling,tweens:[{ease:r.Math.Easing.Back.In,duration:r.Math.Between(200,500),props:{x:0,y:0,z:0}}]}))}))}},this.name=e,this.engine=t,this.position=c,this.rotationY=h,this.fileName=i,this.instanced=l,this.r=d,this.q=g,this.direction=L,l?this.engine.instances.requestInstance("tile","assets/models/",i+".glb",this.engine.babylonScene,this.handleLoaded):n.SceneLoader.ImportMeshAsync("tile","assets/models/",i+".glb",this.engine.babylonScene).then((function(e){A.handleLoaded(e.meshes)}))};t.default=c},1713:function(e,t,i){"use strict";t.__esModule=!0;var n=i(127),s=function(e){this.list={},this.rawData=e.phaserScene.cache.json.get(n.ALKeys.TILES_KEY);for(var t,i,s,a=this.rawData.tiles,o=0,r=a.length;o<r;o++){if(i=(s=(t=a[o]).image).slice(s.indexOf("/tile_")+6,-4),this.list[i]={},t.properties)for(var c=0,h=t.properties.length;c<h;c++)t[t.properties[c].name]=t.properties[c].value;Object.assign(this.list[i],t)}for(var l in n.ALTile){var d=n.ALTile[l];d.key!==n.ALTile.NONE.key&&d.key!==n.ALTile.OUT_OF_BOUNDS.key&&Object.assign(this.list[d.key],d)}};t.default=s},1714:function(e,t,i){"use strict";t.__esModule=!0;var n=i(127),s=function(){function e(e){this.scene=e,e.input.keyboard.on("keydown",this.handleKeyDown,this),e.input.on("pointerdown",this.handlePointerDown,this)}return e.prototype.handlePointerDown=function(e){this.pointerH=e.downX<this.scene.cameras.main.centerX?"W":"E",this.pointerV=e.downY<this.scene.cameras.main.centerY?"N":"S",this.scene.registry.events.emit(n.ALEvents.MOVE_REQUESTED,n.ALDirection[""+this.pointerV+this.pointerH])},e.prototype.handleKeyDown=function(e){switch(this.direction=null,e.code){case"KeyQ":case"KeyA":case"Numpad7":this.direction=n.ALDirection.NW;break;case"KeyW":case"Numpad8":this.direction=n.ALDirection.N;break;case"KeyE":case"KeyD":case"Numpad9":this.direction=n.ALDirection.NE;break;case"KeyZ":case"Numpad1":this.direction=n.ALDirection.SW;break;case"KeyX":case"KeyS":case"Numpad2":case"Numpad5":this.direction=n.ALDirection.S;break;case"KeyC":case"Numpad3":this.direction=n.ALDirection.SE;break;default:return}this.scene.registry.events.emit(n.ALEvents.MOVE_REQUESTED,this.direction)},e}();t.default=s},1715:function(e,t,i){"use strict";t.__esModule=!0;var n=i(127),s=function(e){this.registry=e,this.registry.set(n.ALRegistryKeys.LEVEL_START_POSITION,{x:0,z:0}),this.registry.set(n.ALRegistryKeys.PLAYER_TILE,n.ALTile.START.key),this.registry.set(n.ALRegistryKeys.PLAYER_TILE_ACTION,n.ALTileAction.STANDARD),this.registry.set(n.ALRegistryKeys.TRAPS,{}),this.registry.set(n.ALRegistryKeys.GOALS,{}),this.registry.set(n.ALRegistryKeys.CHECKPOINTS,{}),this.registry.set(n.ALRegistryKeys.END,{})};t.default=s},1716:function(e,t,i){"use strict";t.__esModule=!0;var n=i(1),s=i(127),a=i(234),o=i(172),r=function(e){function t(t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var a=e.call(this,t,i,n)||this;return a.dirty=!0,a.padding=10,a.update=function(){a.dirty&&(a.dirty=!1,a.refresh())},a.setDirty=function(){a.dirty=!0},a.refresh=function(){var e=a.scene.registry.get(s.ALRegistryKeys.GOALS),t=Object.keys(e).length,i=Object.keys(e).filter((function(t){return!0===e[t]})).length;a.debugText.text="POS: "+a.scene.registry.get(s.ALRegistryKeys.PLAYER_COL)+", "+a.scene.registry.get(s.ALRegistryKeys.PLAYER_ROW)+"\nTILE: "+a.scene.registry.get(s.ALRegistryKeys.PLAYER_TILE)+"\nACTION: "+a.scene.registry.get(s.ALRegistryKeys.PLAYER_TILE_ACTION)+"\nGOALS: "+i+"/"+t},a.debugText=t.add.text(a.padding,a.padding,""),a.debugText.setOrigin(0,0),o.addAll(a,a.debugText),o.sceneWatchRegistry(t,s.ALRegistryKeys.PLAYER_ROW,a.setDirty),o.sceneWatchRegistry(t,s.ALRegistryKeys.PLAYER_COL,a.setDirty),o.sceneWatchRegistry(t,s.ALRegistryKeys.PLAYER_TILE,a.setDirty),o.sceneWatchRegistry(t,s.ALRegistryKeys.GOALS,a.setDirty),a}return n.__extends(t,e),t}(a.GameObjects.Container);t.default=r},1717:function(e,t,i){"use strict";t.__esModule=!0;var n=i(172),s=i(127),a=function(){function e(e){var t=this;this.data=[],this.getTileAt=function(e,i){return e<0||i<0||e>t.data.length-1||i>t.data[e].length-1?null:t.data[e][i]},this.getTileKeyAt=function(e,i){var n=t.getTileAt(e,i);return n&&n.key?n.key:s.ALTile.OUT_OF_BOUNDS.key},this.getTileActionAt=function(e,i){var n=t.getTileAt(e,i);return n&&n.tileAction?n.tileAction:s.ALTileAction.INVALID},this.getTileInDirection=function(e,t,i,n){return void 0===n&&(n=1),null},this.handleLevelLayerChanged=function(){t.layer=t.engine.phaserScene.registry.get(s.ALRegistryKeys.LEVEL_LAYER)},this.handleLevelRawDataChanged=function(){t.rawData=t.engine.phaserScene.registry.get(s.ALRegistryKeys.LEVEL_DATA),t.initLevelData()},this.engine=e,this.tilesData=e.phaserScene.registry.get(s.ALRegistryKeys.COMMON_TILES),this.layer=e.phaserScene.registry.get(s.ALRegistryKeys.LEVEL_LAYER),this.rawData=e.phaserScene.registry.get(s.ALRegistryKeys.LEVEL_DATA),this.initLevelData(),this.addListeners()}return e.prototype.addListeners=function(){n.sceneWatchRegistry(this.engine.phaserScene,s.ALRegistryKeys.LEVEL_LAYER,this.handleLevelLayerChanged),n.sceneWatchRegistry(this.engine.phaserScene,s.ALRegistryKeys.LEVEL_DATA,this.handleLevelRawDataChanged)},e.prototype.isValidMove=function(e){return!0},e.prototype.initLevelData=function(){for(var e,t,i=this,n=0,a=this.layer.height;n<a;n++){this.data.push([]);for(var o=0,r=this.layer.width;o<r;o++)e=this.rawData[n*this.layer.width+o]-1,t=Object.keys(this.tilesData.list).filter((function(t){return i.tilesData.list[t].id===e}))[0],this.data[n].push(s.ALTile[Object.keys(s.ALTile).filter((function(e){return s.ALTile[e].key===t}))[0]])}this.engine.phaserScene.registry.set(s.ALRegistryKeys.TILES_DATA,this.data)},e}();t.default=a},1718:function(e,t,i){"use strict";t.__esModule=!0;var n=i(127),s=i(172),a=function(e){var t=this;this.handleLevelStartPosChanged=function(){var e=t.engine.phaserScene.registry.get(n.ALRegistryKeys.LEVEL_START_POSITION);t.engine.phaserScene.registry.set(n.ALRegistryKeys.PLAYER_ROW,e.r),t.engine.phaserScene.registry.set(n.ALRegistryKeys.PLAYER_COL,e.q),t.engine.phaserScene.registry.events.emit(n.ALEvents.PLAYER_MOVED,e.r,e.q)},this.engine=e,this.handleLevelStartPosChanged(),s.sceneWatchRegistry(e.phaserScene,n.ALRegistryKeys.LEVEL_START_POSITION,this.handleLevelStartPosChanged)};t.default=a},172:function(e,t,i){"use strict";t.__esModule=!0;var n=i(234);t.addAll=function e(t,i){Array.isArray(i)?i.forEach((function(i){return e(t,i)})):n.GameObjects.Container.prototype.isPrototypeOf(t)||Object.getPrototypeOf(t)instanceof n.GameObjects.Container?t.add(i):n.Scene.prototype.isPrototypeOf(t)||Object.getPrototypeOf(t)instanceof n.Scene?t.add.existing(i):console.log("ERROR: ALUtils.js: addAll: parent is not a PhaserScene or PhaserGameObjects.Container.")},t.sceneWatchRegistry=function(e,t,i){e.registry.events.on("changedata-"+t,i),e.events.on("shutdown",(function(){return e.registry.events.off("changedata-"+t,i)}))},t.sceneOnRegistry=function(e,t,i){e.registry.events.on(t,i),e.events.on("shutdown",(function(){return e.registry.events.off(t,i)}))}},768:function(e,t,i){"use strict";t.__esModule=!0,i(486),i(380),i(769),new(i(773).default)},769:function(e,t,i){var n=i(770);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insert:"head",singleton:!1};i(772)(n,s);n.locals&&(e.exports=n.locals)},770:function(e,t,i){(e.exports=i(771)(!1)).push([e.i,"html,\nbody {\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n}\n\n#babylon-canvas,\n#phaser-canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  touch-action: none;\n}\n",""])},773:function(e,t,i){"use strict";t.__esModule=!0;var n=i(127),s=i(775),a=i(172),o=i(1696),r=i(1717),c=i(1718),h=function(){function e(){var e=this;this.addQ=0,this.addR=0,this.currentQ=0,this.currentR=0,this.evenR=!1,this.evenC=!1,this.handleMoveRequested=function(t,i){if(void 0===i&&(i=1),!e.engine.main.player.activeTimeline){switch(e.evenR=e.engine.phaserScene.registry.get(n.ALRegistryKeys.PLAYER_ROW)%2==0,e.evenC=e.engine.phaserScene.registry.get(n.ALRegistryKeys.PLAYER_COL)%2==0,e.addQ=0,e.addR=0,t){case n.ALDirection.NW:e.addR=-1,e.addQ=e.evenR?-1:0;break;case n.ALDirection.NE:e.addR=-1,e.addQ=e.evenR?0:1;break;case n.ALDirection.SW:e.addR=1,e.addQ=e.evenR?-1:0;break;case n.ALDirection.SE:e.addR=1,e.addQ=e.evenR?0:1;break;case n.ALDirection.N:e.addR=-2;break;case n.ALDirection.S:e.addR=2;break;case n.ALDirection.W:e.addQ=-1;break;case n.ALDirection.E:e.addQ=1}e.currentQ=e.engine.phaserScene.registry.get(n.ALRegistryKeys.PLAYER_COL),e.currentR=e.engine.phaserScene.registry.get(n.ALRegistryKeys.PLAYER_ROW),e.destinationTile=e.map.getTileAt(e.currentR+e.addR,e.currentQ+e.addQ),e.destinationTile&&e.engine.phaserScene.registry.events.emit(e.destinationTile.tileAction,new s.default(t,e.addR,e.addQ),e.destinationTile,e.evenR)}},this.handlePlayerMoved=function(t,i){e.engine.phaserScene.registry.set(n.ALRegistryKeys.PLAYER_TILE,e.map.getTileKeyAt(t,i)),e.engine.phaserScene.registry.set(n.ALRegistryKeys.PLAYER_TILE_ACTION,e.map.getTileActionAt(t,i))},new Promise((function(e){return new o.default(e)})).then((function(t){e.init(t)}))}return e.prototype.init=function(e){this.engine=e,this.map=new r.default(this.engine),this.player=new c.default(this.engine),this.addListeners()},e.prototype.addListeners=function(){a.sceneOnRegistry(this.engine.phaserScene,n.ALEvents.MOVE_REQUESTED,this.handleMoveRequested),a.sceneOnRegistry(this.engine.phaserScene,n.ALEvents.PLAYER_MOVED,this.handlePlayerMoved)},e}();t.default=h},774:function(e,t,i){"use strict";t.__esModule=!0;var n=i(127),s=function(e,t,i){if(void 0===t&&(t=n.ALTileAction.INVALID),this.key=e,this.tileAction=t,i)for(var s in i)switch(s){case"model":this.model=i.model;break;case"rotation":this.rotation=i.rotation;break;case"instanced":this.instanced=i.instanced;break;case"direction":this.direction=i.direction}};t.ALTileData=s},775:function(e,t,i){"use strict";t.__esModule=!0;var n=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.r=0,this.q=0,this.direction=e,this.r=t,this.q=i};t.default=n}},[[768,3,2,1,4]]]);