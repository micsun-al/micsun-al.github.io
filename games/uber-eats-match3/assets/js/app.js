!function(t){function e(e){for(var o,a,s=e[0],u=e[1],c=e[2],h=0,f=[];h<s.length;h++)a=s[h],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&f.push(r[a][0]),r[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);for(l&&l(e);f.length;)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(o=!1)}o&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},r={2:0},i=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var l=u;i.push([350,1,0]),n()}({350:function(t,e,n){"use strict";n.r(e);n(136),n(347),n(348);var o=n(1),r=n.n(o),i=["AvatarLabs","Snapchat","Uber Eats","James Safechuck","Laura Primack","Nicole Karon","Kat Fisher","Esther Lee","Michael Sunwoo","Ashley Morgan","Sallie Crawford","Journey Whitaker","Whitney Ruhlin","Nicole Taylor"],a={intro:{ID:"music_intro",PATH:["assets/audio/intro_0.mp3"]},game:{ID:"music_game",PATH:["assets/audio/game_0.mp3"]},summary:{ID:"music_summary",PATH:["assets/audio/summary_0.mp3"]}},s={tap:{ID:"sound_tap",PATH:["assets/audio/tap_0.mp3"]},match_3:{ID:"sound_match_3",PATH:["assets/audio/match_3.mp3"]},match_4:{ID:"sound_match_4",PATH:["assets/audio/match_4.mp3"]},match_5:{ID:"sound_match_5",PATH:["assets/audio/match_5.mp3"]}},u={UBER_EATS_CTA:"https://ubr.to/ordereats"},c={easy:{ID:"easy",SECONDS:60,MINIMUM_MULTIPLIER:1},medium:{ID:"medium",SECONDS:45,MINIMUM_MULTIPLIER:10},hard:{ID:"hard",SECONDS:30,MINIMUM_MULTIPLIER:20}},l={uber_move_regular:{ID:"uber_move_regular",IMAGE:"assets/fonts/uber-move-regular.png",DATA:"assets/fonts/uber-move-regular.fnt"},uber_move_regular_black:{ID:"uber_move_regular_black",IMAGE:"assets/fonts/uber-move-regular-black.png",DATA:"assets/fonts/uber-move-regular.fnt"},uber_move_medium:{ID:"uber_move_medium",IMAGE:"assets/fonts/uber-move-medium.png",DATA:"assets/fonts/uber-move-medium.fnt"},uber_move_medium_black:{ID:"uber_move_medium_black",IMAGE:"assets/fonts/uber-move-medium-black.png",DATA:"assets/fonts/uber-move-medium.fnt"},uber_move_bold:{ID:"uber_move_bold",IMAGE:"assets/fonts/uber-move-bold.png",DATA:"assets/fonts/uber-move-bold.fnt"},uber_move_bold_black:{ID:"uber_move_bold_black",IMAGE:"assets/fonts/uber-move-bold-black.png",DATA:"assets/fonts/uber-move-bold.fnt"}},h={match_3:{POINTS:200,MULTIPLIER:1},match_4:{POINTS:500,MULTIPLIER:5},match_5:{POINTS:1e3,MULTIPLIER:10}},f={MUSIC:"MUSIC",SOUNDS:"SOUNDS",DIFFICULTY:"DIFFICULTY",TIME_REMAINING:"TIME_REMAINING",MULTIPLIER:"MULTIPLIER",SCORE:"SCORE",TILE_SCALE_X:"TILE_SCALE_X",TILE_SCALE_Y:"TILE_SCALE_Y",MUTED:"MUTED"},p={REFLOW_REQUESTED:"REFLOW_REQUESTED",MATCH:"MATCH",GAME_REQUESTED:"GAME_REQUESTED",REQUEST_MUSIC:"REQUEST_MUSIC",REQUEST_SOUND:"REQUEST_SOUND"},d=[{index:0,color:"RED",symbol:"TILE_0",texture:"game/tiles/tile_0",hexColor:16766930},{index:1,color:"GREEN",symbol:"TILE_1",texture:"game/tiles/tile_1",hexColor:16101120},{index:2,color:"ORANGE",symbol:"TILE_2",texture:"game/tiles/tile_2",hexColor:16738615},{index:3,color:"LIME",symbol:"TILE_3",texture:"game/tiles/tile_3",hexColor:49761},{index:4,color:"PURPLE",symbol:"TILE_4",texture:"game/tiles/tile_4",hexColor:13817840}],y={columns:6,rows:8,tileWidth:150,tileHeight:150,paddingX:20,paddingY:20,width:1e3,height:1300},b={timerStartDelay:2e3,suggestionDelay:2e3,fallSpeed:100,destroySpeed:200,swapSpeed:250,tiles:d,board:y,maxHealth:100,minHealth:0,healthScalingPadding:.05,multiplierDecaySpeed:.05},m={photoshop:{WIDTH:1080,HEIGHT:1920,CENTER_X:540,CENTER_Y:960}},g={type:Phaser.AUTO,pixelArt:!1,title:"Uber Eats + McDonalds: Holiday Treats Delivered",url:"https://ubr.to/ordereats",banner:{text:"white",background:["#FD7400","#FFE11A","#BEDB39","#1F8A70","#004358"]},backgroundColor:0,disableContextMenu:!0,transparent:!1,render:{powerPreference:"high-performance"},scale:{parent:"canvas-container",autoCenter:Phaser.Scale.CENTER_HORIZONTALLY,mode:Phaser.Scale.HEIGHT_CONTROLS_WIDTH,width:m.photoshop.WIDTH,height:m.photoshop.HEIGHT}},v={GLOBAL:"Global",BOOT:"Boot",MENU:"Menu",GAME:"Game",BOARD:"Board",END:"End"},E={main:{ID:"main",IMAGE:"assets/sheets/main.png",DATA:"assets/sheets/main.json"}};b.tiles.width=b.board.width/b.board.columns,b.tiles.height=b.board.height/b.board.rows,b.tiles.centerX=.5*b.tiles.width,b.tiles.centerY=.5*b.tiles.height,b.board.centerX=.5*b.board.width,b.board.centerY=.5*b.board.height,g.centerX=.5*g.width,g.centerY=.5*g.height;var _=function t(e){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f)switch(n){case f.MUTED:var o="true"===localStorage.getItem(f.MUTED);e.registry.set(f[n],!!o);break;case f.DIFFICULTY:e.registry.set(f[n],c.easy);break;case f.TIME_REMAINING:e.registry.set(f[n],60);break;default:e.registry.set(f[n],0)}},w={SET:"set",EVENT:"event",PAGE_VIEW:"page_view",SCREEN_VIEW:"screen_view",SELECT_CONTENT:"select_content",SHARE:"share",TIMING_COMPLETE:"timing_complete",MUTE_ON:"mute_on",MUTE_OFF:"mute_off",INTRO_EASY:"intro_easy",INTRO_MEDIUM:"intro_medium",INTRO_HARD:"intro_hard",GAME_MATCH_3:"game_match_3",GAME_MATCH_4:"game_match_4",GAME_MATCH_5:"game_match_5",GAME_INCORRECT:"game_incorrect",GAME_CANCEL_SELECTION:"game_cancel_selection",GAME_COMPLETE:"game_complete",SUMMARY_EASY:"summary_easy",SUMMARY_MEDIUM:"summary_medium",SUMMARY_HARD:"summary_hard",SUMMARY_CTA_0:"summary_cta_0"},O={BOOT:"Boot",INTRO:"Intro",GAME:"Game",SUMMARY:"Summary",SHARED:"Shared"},T=v.BOOT,S=v.BOOT,I=Date.now(),P={sendEvent:function(t,e,n,o){if(void 0!==e){var r={event_category:e};void 0!==n&&(r.event_label=n),void 0!==o&&(r.value=o),gtag(w.EVENT,t,r)}else gtag(w.EVENT,t)},eventPageView:function(){gtag(w.EVENT,w.PAGE_VIEW)},setScreenName:function(t){S=T,gtag(w.SET,{screen_name:t}),gtag(w.EVENT,w.SCREEN_VIEW,{screen_name:t}),void 0!==I?(gtag(w.EVENT,w.TIMING_COMPLETE,{duration:Date.now()-I,screen_name:S||v.BOOT}),I=Date.now(),T=t):I=Date.now()},eventSelectContent:function(t,e,n,o){gtag(w.EVENT,w.SELECT_CONTENT,{items:t,promotions:e,content_type:n,content_id:o})},eventShare:function(t,e,n){gtag(w.EVENT,w.SHARE,{method:t,content_type:e,content_id:n})},eventTimingComplete:function(t,e){gtag(w.EVENT,w.TIMING_COMPLETE,{name:t,value:e})}};function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function D(t,e){return!e||"object"!==M(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var R=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),D(this,j(e).call(this,{key:v.BOOT}))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(e,t),n=e,(o=[{key:"init",value:function(){var t=this;new _(this),this.scale.on(r.a.Scale.Events.RESIZE,(function(){t.registry.events.emit(p.REFLOW_REQUESTED)}))}},{key:"preload",value:function(){for(var t in this.load.atlas(E.main.ID,E.main.IMAGE,E.main.DATA),a)this.load.audio(a[t].ID,a[t].PATH);for(var e in s)this.load.audio(s[e].ID,s[e].PATH);for(var n in l){var o=l[n];this.load.bitmapFont(o.ID,o.IMAGE,o.DATA)}}},{key:"create",value:function(){for(var t=document.querySelectorAll(".loading-container"),e=0,n=t.length;e<n;e++){var o=t[e];o.parentNode.removeChild(o)}P.setScreenName(v.BOOT),this.scene.start(v.MENU),this.scene.launch(v.GLOBAL).bringToTop(),this.scene.remove()}}])&&C(n.prototype,o),i&&C(n,i),e}(r.a.Scene);function x(t,e){if(Array.isArray(e))e.forEach((function(e){return x(t,e)}));else if(Object.getPrototypeOf(t)instanceof Phaser.GameObjects.Container||"Container"===t.type)t.add(e);else{if(!(Phaser.Scene.prototype.isPrototypeOf(t)||Object.getPrototypeOf(t)instanceof Phaser.Scene||"Scene"===t.type))throw Error("ERROR: ALUtils.js: addAll: parent is not a Phaser.Scene or Phaser.GameObjects.Container. parent:",t,", target:",e);t.add.existing(e)}}function k(t,e,n){t.registry.events.on("changedata-".concat(e),n),t.events.on(Phaser.Scenes.Events.SHUTDOWN,(function(){return t.registry.events.off("changedata-".concat(e),n)}))}function L(t,e,n){t.registry.events.on(e,n),t.events.on(Phaser.Scenes.Events.SHUTDOWN,(function(){t.registry.events.off(e,n)}))}function H(t,e,n){return e<0&&(e=t.length+e)<0&&(e=0),t.slice(0,e)+t.slice(e+n)}var U={"+":function(t,e){return t+e},"-":function(t,e){return t-e},"*":function(t,e){return t*e},"/":function(t,e){return t/e},"%":function(t,e){return t%e}},G=function(t){return U[t]},N=function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Phaser.Math.Easing.Linear,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(!Array.isArray(e)){var u,c,l={targets:e,duration:o,ease:r,delay:i,repeat:a,repeatDelay:i,yoyo:s,props:{}};for(var h in n)c=e[h],"string"==typeof(u=n[h])?("="===u.slice(1,2)&&(u=H(u,1,1)),"+"===u.slice(0,1)&&(u=H(u,0,1)),u=parseInt(u),l.props[h]={getStart:function(t,e,n){return n+u},getEnd:function(t,e,n){return n-u}}):l.props[h]={getStart:function(t,e,n){return u},getEnd:function(t,e,n){return c}};return l}t.forEach((function(e){return t(e)}))},B=function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Phaser.Math.Easing.Linear,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(!Array.isArray(e)){var u,c={targets:e,duration:o,ease:r,delay:i,repeatDelay:i,repeat:a,yoyo:s,props:{}};for(var l in n)if("string"==typeof(u=n[l])){var h=G(u.slice(0,1));u=parseInt(u.slice(2)),c.props[l]=h(e[l],u)}else c.props[l]=u;return c}N.forEach((function(e){return t(e)}))},F=function(t){return new URL(window.location).searchParams.get(t)};function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){return!e||"object"!==Y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var q=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:400,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:200,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3e4,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Q(this,X(e).call(this,t,o,r))).particles=[];for(var c=0;c<a;c++){var l=t.make.container({x:Phaser.Math.Between(.5*-m.photoshop.WIDTH,.5*m.photoshop.WIDTH),y:-50}),h=t.make.image({x:0,y:Phaser.Math.Between(0,-50),key:E.main.ID,frame:Phaser.Utils.Array.GetRandom(["shared/snow/snow_0"]),scale:Phaser.Math.FloatBetween(.3*u,u),alpha:Phaser.Math.FloatBetween(.3,.5)});l.add(h);var f=Phaser.Math.Between(.5*s,s);t.tweens.timeline({targets:l,delay:Phaser.Math.Between(0,2e4),loop:-1,tweens:[{duration:f,props:{rotation:Phaser.Math.FloatBetween(-2*Math.PI,2*Math.PI),y:{from:l.y,to:l.y+Phaser.Math.Between(.8*i,i)}}},{offset:0,duration:.1*f,ease:Phaser.Math.Easing.Quadratic.InOut,props:{alpha:{from:0,to:1}}},{offset:.9*f,duration:.1*f,ease:Phaser.Math.Easing.Quadratic.InOut,props:{alpha:{from:1,to:0}}}]}),n.add(l),n.particles.push(l)}return n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(e,Phaser.GameObjects.Container),e}();function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Z=function(t){function e(t){var n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=K(e).call(this,t,i,a))||"object"!==V(r)&&"function"!=typeof r?J(o):r).images=[t.add.image(0,-m.photoshop.CENTER_Y,E.main.ID,"shared/bg/white_tile").setOrigin(.5,0),t.add.image(0,-.42*m.photoshop.HEIGHT,E.main.ID,"shared/bg/pink_tile").setOrigin(.5,0),t.add.image(0,-.42*m.photoshop.HEIGHT,E.main.ID,"shared/edges/edge_3").setOrigin(.5,0),t.add.image(0,.5*m.photoshop.HEIGHT,E.main.ID,"shared/bg/green_tile").setOrigin(.5,1),new q(t,0,-.4*m.photoshop.HEIGHT,1800,300),t.add.image(0,.1*m.photoshop.HEIGHT,E.main.ID,"intro/fg/product")],n.images[0].setScale(m.photoshop.WIDTH/n.images[0].width,178/n.images[0].height),n.images[1].setScale(m.photoshop.WIDTH/n.images[1].width,600/n.images[1].height),n.images[3].setScale(m.photoshop.WIDTH/n.images[3].width,m.photoshop.HEIGHT/n.images[3].height*.3),x(J(n),n.images),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(e,Phaser.GameObjects.Container),e}(),$={shared:{DIFFICULTY_EASY:"Easy",DIFFICULTY_MEDIUM:"Medium",DIFFICULTY_HARD:"Hard"},intro:{HEADER_TITLE:"Order in.\nAnd be merry.",INSTRUCTIONS:"MATCH 3 OR MORE ITEMS TO PLAY WHILE YOU\nSIT BACK, RELAX AND GET AS TOASTY AS PIE."},game:{HEADER_TITLE:"Order in. And be merry.",STAT_TIME_PREFIX:"Time: ",STAT_TIME_APPEND:"",STAT_MULTIPLIER_PREFIX:"Multiplier: ",STAT_MULTIPLIER_APPEND:"x",STAT_SCORE_PREFIX:"Score: ",STAT_SCORE_APPEND:""},summary:{HEADER_TITLE:"Order in. And be merry.",YOUR_SCORE:"Your Score",FOOTER_TEXT:"Play again",FOOTER_DEAL_TEXT:"GET 2 FREE APPLE PIES ON ANY\nMCDONALD'S ORDER OVER $15.",FOOTER_DEAL_SUBTEXT:"(TAXES AND FEES STILL APPLY. SEE UBER EATS APP FOR DETAILS)",CTA_0:"Order Now"}};function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ot(t,e){return(ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rt=function(t){function e(t){var n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=et(e).call(this,t,i,a))||"object"!==tt(r)&&"function"!=typeof r?nt(o):r).logos=[t.add.image(0,0,E.main.ID,"intro/logos/logo_0"),t.add.image(0,0,E.main.ID,"intro/logos/logo_1")],(F("country")||F("co")||F("c")||"us").toLowerCase()){case"ca":case"can":case"canada":case"1":n.logos.push(t.add.image(0,0,E.main.ID,"intro/logos/logo_2b"));break;default:n.logos.push(t.add.image(0,0,E.main.ID,"intro/logos/logo_2a"))}x(nt(n),n.logos);return t.tweens.timeline({tweens:[{targets:n.logos[0],ease:Phaser.Math.Easing.Back.Out,duration:1e3,props:{x:{start:50,to:0}}},{offset:0,targets:n.logos[2],ease:Phaser.Math.Easing.Back.Out,duration:1e3,props:{x:{start:-50,to:0}}},{offset:0,targets:[n.logos[0],n.logos[2]],ease:Phaser.Math.Easing.Quadratic.Out,duration:500,props:{alpha:{start:0,to:1}}},{offset:500,targets:n.logos[1],duration:750,props:{alpha:{start:0,to:1}}}]}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ot(t,e)}(e,Phaser.GameObjects.Container),e}();function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function st(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ct=function(t){function e(t,n,o,r,i){var a,s,u,c,h,f,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"shared/difficulty_button",d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:442727,y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:50,b=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,m=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,u=at(e).call(this,t,n,o),a=!u||"object"!==it(u)&&"function"!=typeof u?st(s):u,c=st(a),f=function(t,e,n,o){a.callback(o)},(h="handlePointerUp")in c?Object.defineProperty(c,h,{value:f,enumerable:!0,configurable:!0,writable:!0}):c[h]=f,a.callback=i,a.button=t.add.image(0,0,E.main.ID,p),null!==d&&a.button.setTint(d),a.text=t.add.bitmapText(b,m,l.uber_move_bold.ID,r,y).setOrigin(.5),a.button.setInteractive({useHandCursor:!0}).on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,a.handlePointerUp,st(a)),a.width=a.button.width,x(st(a),[a.button,a.text]),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(e,Phaser.GameObjects.Container),e}();function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dt(t,e){return(dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yt=function(t){function e(t){var n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,r=ft(e).call(this,t,i,a);(n=!r||"object"!==lt(r)&&"function"!=typeof r?pt(o):r).buttons=[new ct(t,-330,0,$.shared.DIFFICULTY_EASY,(function(){return n.handleDifficultyClicked(c.easy)}),"shared/difficulty_button",16777215,50,0,5),new ct(t,0,0,$.shared.DIFFICULTY_MEDIUM,(function(){return n.handleDifficultyClicked(c.medium)}),"shared/difficulty_button",16777215,50,0,5),new ct(t,330,0,$.shared.DIFFICULTY_HARD,(function(){return n.handleDifficultyClicked(c.hard)}),"shared/difficulty_button",16777215,50,0,5)],x(pt(n),n.buttons),n.width=n.buttons[0].width+n.buttons[1].width+n.buttons[2].width+56;for(var s=0;s<3;s++){var u=n.buttons[s];t.tweens.timeline({targets:u,delay:600,tweens:[{offset:200*s,duration:1250,ease:Phaser.Math.Easing.Quintic.Out,props:{y:{start:u.y+50,to:u.y}}},{offset:200*s,duration:1e3,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:0,to:1}}}]})}return n}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dt(t,e)}(e,Phaser.GameObjects.Container),n=e,(o=[{key:"handleDifficultyClicked",value:function(t){this.scene.registry.events.emit(p.REQUEST_SOUND,s.tap.ID),this.scene.registry.events.emit(p.GAME_REQUESTED,t)}}])&&ht(n.prototype,o),r&&ht(n,r),e}();function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vt(t,e){return(vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Et=function(t){function e(t,n,o){var r,i,a,s,u,c,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:85,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.uber_move_bold_black.ID;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,a=mt(e).call(this,t,n,o,p,h,f,1),r=!a||"object"!==bt(a)&&"function"!=typeof a?gt(i):a,s=gt(r),c=function(t){return void 0===r.original[t.index]&&(r.original[t.index]=t.y),t.y=(Math.cos(Date.now()/1369+(r.text.length-t.index)*r.frequency)+Math.sin(Date.now()/1e3+(r.text.length-t.index)*r.frequency))*r.amplitude+r.original[t.index],t},(u="textCallback")in s?Object.defineProperty(s,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[u]=c,r.original={},r.frequency=.2,r.amplitude=12,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vt(t,e)}(e,Phaser.GameObjects.DynamicBitmapText),e}();function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var It=function(t){function e(){var t,n,o,r,i,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=Ot(e).call(this,{key:v.MENU}),t=!o||"object"!==_t(o)&&"function"!=typeof o?Tt(n):o,r=Tt(t),a=function(e){P.sendEvent("intro_".concat(e.ID),O.INTRO),t.registry.set(f.DIFFICULTY,e),t.scene.start(v.GAME)},(i="handleGameRequested")in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,t}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(e,Phaser.Scene),n=e,(o=[{key:"create",value:function(){var t=this;P.setScreenName(v.BOOT),L(this,p.REFLOW_REQUESTED,(function(){t.dirty=!0})),L(this,p.GAME_REQUESTED,this.handleGameRequested),this.container=this.add.container(this.cameras.main.centerX,this.cameras.main.centerY),this.background=new Z(this),this.logos=new rt(this,0,-.445*m.photoshop.HEIGHT),this.title=new Et(this,0,-.3*m.photoshop.HEIGHT,$.intro.HEADER_TITLE),this.message=this.add.bitmapText(0,-.205*m.photoshop.HEIGHT,l.uber_move_medium_black.ID,$.intro.INSTRUCTIONS,42,1),function t(e,n,o){void 0===o&&(o=n),Array.isArray(e)?e.forEach((function(e){return t(e,n,o)})):e.setOrigin(n,o)}([this.title,this.message]),this.buttons=new yt(this,0,.415*m.photoshop.HEIGHT),x(this.container,[this.background,this.logos,this.title,this.message,this.buttons]),this.reflowElements(),this.tweens.timeline({tweens:[{offset:200,targets:this.title,duration:1250,ease:Phaser.Math.Easing.Back.Out,props:{x:{start:this.title.x-50,to:this.title.x}}},{offset:200,targets:this.title,duration:1e3,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:0,to:1}}},{offset:400,targets:this.message,duration:1250,ease:Phaser.Math.Easing.Back.Out,props:{x:{start:this.message.x+50,to:this.message.x}}},{offset:400,targets:this.message,duration:1e3,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:0,to:1}}}]})}},{key:"update",value:function(t,e){this.dirty&&this.reflowElements()}},{key:"reflowElements",value:function(){this.dirty=!1,this.container.setPosition(this.cameras.main.centerX,this.cameras.main.centerY),this.container.setScale(this.cameras.main.height/m.photoshop.HEIGHT)}}])&&wt(n.prototype,o),r&&wt(n,r),e}();var Pt=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color=e,this.sprite=n};function Mt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ct=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.board=e}var e,n,o;return e=t,(n=[{key:"request",value:function(){this.cancel(),this.board.data.values.tweenCount<=0&&this.board.matchInBoard()?this.board.handleNoRemainingMatches():this.timer=this.board.scene.time.addEvent({delay:b.suggestionDelay,callback:this.show,callbackScope:this})}},{key:"cancel",value:function(){this.timer&&(this.timer.remove(),this.timer=null)}},{key:"show",value:function(){this.cancel();for(var t=!1,e=0,n=y.rows-1;e<n;e++)for(var o=0,r=y.columns-1;o<r;o++){if(this.tmpSwap(e,o,e+1,o),t=this.board.matchInBoard(),this.tmpSwap(e,o,e+1,o),t)return void this.requestHint(this.board.data.values.tiles[e][o].sprite,this.board.data.values.tiles[e+1][o].sprite);if(this.tmpSwap(e,o,e,o+1),t=this.board.matchInBoard(),this.tmpSwap(e,o,e,o+1),t)return void this.requestHint(this.board.data.values.tiles[e][o].sprite,this.board.data.values.tiles[e][o+1].sprite)}this.board.handleNoRemainingMatches()}},{key:"requestHint",value:function(t,e){this.stopHints(),this.hintA=this.addHint(t),this.hintB=this.addHint(e)}},{key:"addHint",value:function(t){return this.board.scene.add.tween(B(t,{y:"-=10"},r.a.Math.RND.integerInRange(50,150),r.a.Math.Easing.Quintic.Out,r.a.Math.RND.integerInRange(5e3,1e4),-1,!0))}},{key:"stopHints",value:function(){this.hintA&&this.hintA.stop&&this.hintA.stop(),this.hintB&&this.hintB.stop&&this.hintB.stop()}},{key:"tmpSwap",value:function(t,e,n,o){var r=this.board.data.values.tiles[t][e];this.board.data.values.tiles[t][e]=this.board.data.values.tiles[n][o],this.board.data.values.tiles[n][o]=r}}])&&Mt(e.prototype,n),o&&Mt(e,o),t}();function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function At(t){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xt(t,e){return(xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kt=function(t){function e(t,n,o){var i,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a=this,(i=!(s=At(e).call(this,t,d.width*n+d.centerX,d.height*o+.5*d.height))||"object"!==Dt(s)&&"function"!=typeof s?Rt(a):s).tileData=d[r.a.Math.Between(0,d.length-1)],i.bg=i.scene.add.image(0,0,E.main.ID,"game/tiles/bg"),i.bg.alpha=0,i.bg.tint=i.tileData.hexColor,i.icon=i.scene.add.image(0,0,E.main.ID,"game/tiles/tile_".concat(i.tileData.index)),t.registry.set(f.TILE_SCALE_X,(d.width-y.paddingX)/i.icon.width),t.registry.set(f.TILE_SCALE_Y,(d.height-y.paddingY)/i.icon.height),i.setScale(t.registry.get(f.TILE_SCALE_X),t.registry.get(f.TILE_SCALE_Y)),x(Rt(i),[i.bg,i.icon]),t.tweens.timeline({targets:i.icon,tweens:[{ease:r.a.Math.Easing.Quintic.Out,duration:100,props:{y:r.a.Math.Between(-10,-50)}},{ease:r.a.Math.Easing.Bounce.Out,duration:r.a.Math.Between(300,600),props:{y:0}}]}),t.time.delayedCall(100,(function(){t.cameras.main.shake(30,r.a.Math.FloatBetween(.001,.003))})),i}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xt(t,e)}(e,t),n=e,(o=[{key:"setColor",value:function(t){this.tileData=d[t],this.icon.setFrame("game/tiles/tile_".concat(this.tileData.index)),this.bg.tint=this.tileData.hexColor}}])&&jt(n.prototype,o),i&&jt(n,i),e}(r.a.GameObjects.Container);function Lt(t){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gt(t,e){return(Gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nt=function(t){function e(t){var n,o,r,i,a,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,r=Ht(e).call(this,t,u,c),n=!r||"object"!==Lt(r)&&"function"!=typeof r?Ut(o):r,i=Ut(n),s=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],n.alpha=0;var t=Phaser.Geom.Circle.Random(new Phaser.Geom.Circle(0,0,n.burstRadius*Phaser.Math.FloatBetween(.2,1))),e=Phaser.Math.Between(n.timeMin,n.timeMax);return n.scene.tweens.timeline({tweens:[{targets:Ut(n),duration:e,ease:Phaser.Math.Easing.Quadratic.Out,props:{x:"+=".concat(t.x),y:"+=".concat(t.y)}},{targets:Ut(n),offset:0,duration:.2*e,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:0,to:1}}},{targets:Ut(n),offset:.8*e,duration:.2*e,ease:Phaser.Math.Easing.Linear,props:{alpha:{from:1,to:0}}},{targets:n.image,offset:.5*e,duration:.5*e,ease:Phaser.Math.Easing.Quadratic.In,props:{scale:{from:n.scale,to:n.scale*Phaser.Math.FloatBetween(0,.8)}}},{targets:n.image,offset:0,duration:e,ease:Phaser.Math.Easing.Linear,props:{rotation:{from:Phaser.Math.FloatBetween(-.2*Math.PI,.2*Math.PI),to:Phaser.Math.FloatBetween(-.2*Math.PI,.2*Math.PI)}}}]}),Ut(n)},(a="requestBurst")in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,n.timeMin=200,n.timeMax=800,n.burstRadius=30;var l=Phaser.Geom.Circle.Random(new Phaser.Geom.Circle(u,c,100));return n.image=t.make.image({x:l.x,y:l.y,key:E.main.ID,frame:Phaser.Utils.Array.GetRandom(["shared/snow/snow_0","shared/snow/snow_0","shared/snow/snow_0","shared/snow/snow_0","shared/snow/snow_0","shared/snow/snow_0","shared/snow/snow_0","shared/snow/snow_0","shared/snow/snow_0","shared/snow/snow_0","shared/snow/snow_0","shared/snow/snow_0","shared/snow/snow_0","shared/snow/snow_0","shared/particles/particle_0","shared/particles/particle_1"]),rotation:Phaser.Math.FloatBetween(2*-Math.PI,2*Math.PI)}),n.add(n.image),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gt(t,e)}(e,Phaser.GameObjects.Container),e}();function Bt(t){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wt=function(t){function e(t,n){var o,r,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,i=Ft(e).call(this,t,a,s),o=!i||"object"!==Bt(i)&&"function"!=typeof i?Yt(r):i,Xt(Yt(o),"handleMatch",(function(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];o["burstMatch".concat(t>5?5:t)](i,r,a,s)})),Xt(Yt(o),"burstMatch3",(function(t,e,n){if(n)for(var r=0;r<3;r++)o.requestTileBurst(t,e-r);else for(var i=0;i<3;i++)o.requestTileBurst(t-i,e)})),Xt(Yt(o),"burstMatch4",(function(t,e,n){if(n)for(var r=0;r<y.columns;r++)o.requestTileBurst(t,r);else for(var i=0;i<y.rows;i++)o.requestTileBurst(i,e)})),Xt(Yt(o),"burstMatch5",(function(t,e,n,r){for(var i=0,a=r.length;i<a;i++)o.requestTileBurst(r[i][0],r[i][1])})),Xt(Yt(o),"requestTileBurst",(function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;o.particles=[];for(var r=0;r<n;r++){var i=o.tileBurstParticles.get((e+.5)*d.width,(t+.5)*d.height).setPosition(0,0).requestBurst();o.particles.push(i)}o.parentContainer.add(o.particles)})),o.parentContainer=n,o.tileBurstParticles=t.make.group({defaultKey:E.main.ID,defaultFrame:"shared/particles/particle_0",scene:t,classType:Nt}),L(t,p.MATCH,o.handleMatch),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}(e,Phaser.GameObjects.Container),e}();function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zt=function(t){function e(t){var n,o,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(i=Kt(e).call(this,t,a,s))||"object"!==qt(i)&&"function"!=typeof i?Jt(o):i).setData({fastFall:!0,tiles:[],removeMap:[],canPick:!0,bounds:new r.a.Geom.Rectangle,pointerDown:!1,tweenCount:0,current:{tile:null,col:0,row:0,x:0,y:0},selected:{tile:null,col:0,row:0,x:0,y:0}}),n.drawBoard(),n.initInput(),n.suggestion=new Ct(Jt(n)),n.suggestion.request(),t.add.existing(Jt(n)),n.effects=new Wt(t,Jt(n)),n.width=1.2*b.board.width,n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(e,t),n=e,(o=[{key:"initInput",value:function(){this.grid=this.scene.add.sprite(0,0,E.main.ID,"game/tiles/grid_6x8"),this.grid.displayOriginX=this.grid.displayOriginY=0,this.grid.scaleX=y.width/this.grid.width,this.grid.scaleY=y.height/this.grid.height,this.grid.alpha=.01,this.add(this.grid),this.grid.setInteractive({useHandCursor:!0}),this.grid.on(r.a.Input.Events.POINTER_DOWN,this.handleGridDown,this),this.scene.input.on(r.a.Input.Events.POINTER_UP,this.handlePointerUp,this),this.scene.input.on(r.a.Input.Events.POINTER_UP_OUTSIDE,this.handleGridUpOutside,this),this.scene.input.on(r.a.Input.Events.POINTER_MOVE,this.handlePointerMove,this)}},{key:"handleNoRemainingMatches",value:function(){this.destroyTiles(!0)}},{key:"drawBoard",value:function(){for(var t=r.a.Math.RND.pick(d),e=0,n=y.rows;e<n;e++){this.data.values.tiles[e]=[];for(var o=0,i=y.columns;o<i;o++){var a=new kt(this.scene,o,e);for(this.add(a),t=r.a.Math.RND.pick(d),this.data.values.tiles[e][o]=new Pt(t.index,a);this.isMatch(e,o);)t=r.a.Math.RND.pick(d),this.data.values.tiles[e][o].color=t.index;a.setColor(t.index),this.scene.add.tween(N(a,{y:"-100"},r.a.Math.RND.integerInRange(500,800),r.a.Math.Easing.Bounce.Out))}}this.data.values.selected.tile=null}},{key:"handleGridDown",value:function(t,e){if(this.updateCurrent(this.grid.input.localX,this.grid.input.localY),this.suggestion.stopHints(),this.data.values.canPick&&!(this.data.values.tweenCount>0)){var n=this.data.values.selected,o=this.tileAt(~~this.grid.input.localY,~~this.grid.input.localX);-1!==o&&(n.tile?(o.row=this.getTileRow(o),o.col=this.getTileCol(o),this.scene.tweens.add({targets:n.tile.sprite,duration:200,ease:r.a.Math.Easing.Quadratic.InOut,props:{scaleX:this.scene.registry.get(f.TILE_SCALE_X),scaleY:this.scene.registry.get(f.TILE_SCALE_Y),alpha:1}}),this.areTheSame(o,n.tile)?n.tile=null:this.areNext(o,n.tile)?(this.swapTiles(o,n.tile,!0),n.tile=null):(Object.assign(n,this.data.values.current),this.selectTile(this.tileAt(n.row,n.col)),P.sendEvent(w.GAME_CANCEL_SELECTION,O.GAME))):(Object.assign(n,this.data.values.current),this.setData("pointerDown",!0),this.selectTile(this.tileAt(n.row,n.col))))}}},{key:"selectTile",value:function(t){this.data.values.selected.tile=t,this.scene.tweens.add({targets:t.sprite,duration:200,ease:r.a.Math.Easing.Quadratic.InOut,props:{alpha:.8,scale:"*=1.05"}})}},{key:"areNext",value:function(t,e){return Math.abs(this.getTileRow(t)-this.getTileRow(e))+Math.abs(this.getTileCol(t)-this.getTileCol(e))===1}},{key:"areTheSame",value:function(t,e){return t.row===e.row&&t.col===e.col}},{key:"tileDeselect",value:function(){this.data.values.selected.tile=null}},{key:"handlePointerMove",value:function(t,e){if(this.scene.input.activePointer.isDown&&this.data.values.canPick&&this.data.values.selected.tile&&!(this.data.values.tweenCount>0)){this.suggestion.stopHints();var n=this.grid.input.localX-this.data.values.selected.x,o=this.grid.input.localY-this.data.values.selected.y,i=0,a=0;Math.abs(n)>.5?a=n>0?1:-1:Math.abs(o)>.5&&(i=o>0?1:-1);var s=this.tileAt(~~this.data.values.selected.y+i,~~this.data.values.selected.x+a);0===i&&0===a||(this.scene.tweens.add({targets:this.data.values.selected.tile.sprite,duration:200,ease:r.a.Math.Easing.Quadratic.InOut,props:{scaleX:this.scene.registry.get(f.TILE_SCALE_X),scaleY:this.scene.registry.get(f.TILE_SCALE_Y),alpha:1}}),this.swapTiles(this.data.values.selected.tile,s,!0),this.data.values.selected.tile=null)}}},{key:"tileAt",value:function(t,e){return n=e,o=t,r=0,i=0,a=y.columns,s=y.rows,n>=r&&n<r+a&&o>=i&&o<i+s?this.data.values.tiles[t][e]:-1;var n,o,r,i,a,s}},{key:"swapTiles",value:function(t,e,n){var o=this;if(-1!==t&&-1!==e&&t&&e){this.data.values.canPick=!1;var i=t.color,a=t.sprite,s=e.color,u=e.sprite,c=this.getTileRow(t),l=this.getTileCol(t),h=this.data.values.tiles[c][l],f=this.getTileRow(e),p=this.getTileCol(e),y=this.data.values.tiles[f][p];null!==h&&null!==y&&(this.suggestion.cancel(),this.data.values.tiles[c][l].color=s,this.data.values.tiles[c][l].sprite=u,this.data.values.tiles[f][p].color=i,this.data.values.tiles[f][p].sprite=a,this.data.values.tweenCount++,this.scene.add.tween(B(h.sprite,{x:l*d.width+d.centerX,y:c*d.height+d.centerY},b.swapSpeed,r.a.Math.Easing.Quadratic.Out)),this.scene.add.tween(Object.assign(B(y.sprite,{x:p*d.width+d.centerX,y:f*d.height+d.centerY},b.swapSpeed,r.a.Math.Easing.Quadratic.Out),{onComplete:function(){o.data.values.tweenCount--;var r=o.matchInBoard();n&&!r?(o.swapTiles(t,e,!1),P.sendEvent(w.GAME_INCORRECT,O.GAME)):r?o.handleMatches():(o.data.values.canPick=!0,o.data.values.selected.tile=null)}})))}}},{key:"handleMatches",value:function(){this.data.values.removeMap.length=0;for(var t=0,e=y.rows;t<e;t++){this.data.values.removeMap[t]=[];for(var n=0,o=y.columns;n<o;n++)this.data.values.removeMap[t].push(0)}this.handleHorizontalMatches(),this.handleVerticalMatches(),this.destroyTiles()}},{key:"handleVerticalMatches",value:function(){for(var t=this,e=function(e,n){for(var o=1,r=-1,i=0,a=0,s=y.rows;a<s;a++){var u=t.tileAt(a,e);if(u&&(u.color===r&&o++,u.color!==r||a>=y.rows-1)){if(o>=3){var c=0,l=[];switch(o){case 3:for(var h=0;h<o;h++)t.data.values.removeMap[i+h][e]++,c=3;break;case 4:for(var f=0,b=y.rows;f<b;f++)t.data.values.removeMap[f][e]++,c++;break;default:for(var m=0,g=y.rows;m<g;m++)for(var v=0,E=y.columns;v<E;v++)t.tileAt(m,v).color===r&&(t.data.values.removeMap[m][v]++,c++,l.push([m,v]))}t.scene.registry.events.emit(p.MATCH,o,c,d.filter((function(t){return t.index===r}))[0],e,a-(a>=y.rows-1&&u.color===r?0:1),!1,l)}i=a,o=1,r=u.color}}},n=0,o=y.columns;n<o;n++)e(n)}},{key:"handleHorizontalMatches",value:function(){for(var t=this,e=function(e,n){for(var o=1,r=-1,i=0,a=0,s=y.columns;a<s;a++){var u=t.tileAt(e,a);if(u&&(u.color===r&&o++,u.color!==r||a>=y.columns-1)){if(o>=3){var c=0,l=[];switch(o){case 3:for(var h=0;h<o;h++)t.data.values.removeMap[e][i+h]++;c=3;break;case 4:for(var f=0;f<y.columns;f++)t.data.values.removeMap[e][f]++,c++;break;default:for(var b=0,m=y.rows;b<m;b++)for(var g=0,v=y.columns;g<v;g++)t.tileAt(b,g).color===r&&(t.data.values.removeMap[b][g]++,c++,l.push([b,g]))}t.scene.registry.events.emit(p.MATCH,o,c,d.filter((function(t){return t.index===r}))[0],a-(a>=y.columns-1&&t.tileAt(e,a).color===r?0:1),e,!0,l)}i=a,o=1,r=u.color}}},n=0,o=y.rows;n<o;n++)e(n)}},{key:"destroyTiles",value:function(t){var e=this,n=0;this.suggestion.cancel();for(var o=0,i=y.rows;o<i;o++)for(var a=0,s=y.columns;a<s;a++)if(t||this.data.values.removeMap[o][a]>0){var u=this.data.values.tiles[o][a];if(!u)continue;this.data.values.tweenCount++,this.scene.add.tween(Object.assign(B(u.sprite,{alpha:0},b.destroySpeed,r.a.Math.Easing.Linear),{onComplete:function(t,o,r){o.forEach((function(t){t.destroy(),n--,e.data.values.tweenCount--,0===n&&(e.makeTilesFall(),e.data.values.fastFall&&e.replenishField())}))}})),n++,this.data.values.tiles[o][a]=null}}},{key:"makeTilesFall",value:function(){this.suggestion.cancel();for(var t=0,e=!1,n=y.rows-2;n>=0;n--)for(var o=0,i=y.columns;o<i;o++){var a=this.data.values.tiles[n][o];if(null!=a){var s=this.holesBelow(n,o);s>0&&(!this.data.values.fastFall&&s>1&&(s=1,e=!0),this.scene.add.tween(Object.assign(B(a.sprite,{y:a.sprite.y+s*d.height},b.fallSpeed,r.a.Math.Easing.Bounce.Out),{onComplete:u,onCompleteScope:this})),this.data.values.tiles[n+s][o]=new Pt(a.color,a.sprite),this.data.values.tiles[n][o]=null,this.data.values.tweenCount++,t++)}}function u(){t--,this.data.values.tweenCount--,0===t&&(e?this.makeTilesFall():this.data.values.fastFall||this.replenishField())}0===t&&this.replenishField()}},{key:"holesBelow",value:function(t,e){for(var n=0,o=t+1,r=y.rows;o<r;o++)null===this.data.values.tiles[o][e]&&n++;return n}},{key:"holesInCol",value:function(t){for(var e=0,n=0,o=y.rows;n<o;n++)null==this.data.values.tiles[n][t]&&e++;return e}},{key:"replenishField",value:function(){this.suggestion.cancel();for(var t=0,e=!1,n=0,o=y.columns;n<o;n++){var i=this.holesInCol(n);if(i>0){!this.data.values.fastFall&&i>1&&(i=1,e=!0);for(var a=0;a<i;a++){var s=r.a.Math.RND.pick(d),u=new kt(this.scene,n,a);u.setColor(s.index),u.setPosition(d.width*n+.5*d.width,d.height*a+.5*d.height),this.add(u),this.data.values.tiles[a][n]=new Pt(s.index,u),this.data.values.tweenCount++,this.scene.add.tween(Object.assign(N(u,{y:u.y-d.height},b.fallSpeed*r.a.Math.FloatBetween(2,4),r.a.Math.Easing.Bounce.Out),{onComplete:c.bind(this),onCompleteScope:this})),this.scene.add.tween(N(u,{alpha:0},2*b.fallSpeed,r.a.Math.Easing.Quadratic.Out)),t++}}}function c(){t--,this.data.values.tweenCount--,0===t&&(e?this.makeTilesFall():this.matchInBoard()?this.scene.time.delayedCall(250,this.handleMatches.bind(this)):(this.data.values.canPick=!0,this.data.values.selected.tile=null,this.suggestion.request()))}}},{key:"getTileRow",value:function(t){return~~(t.sprite.y/d.height)}},{key:"getTileCol",value:function(t){return~~(t.sprite.x/d.width)}},{key:"handlePointerUp",value:function(t,e){this.data.values.selected.tile&&(this.data.values.selected.tile.alpha=1),this.updateCurrent(this.grid.input.localX,this.grid.input.localY),this.setData("pointerDown",!1)}},{key:"handleGridUpOutside",value:function(t){this.data.values.selected.tile&&(this.data.values.selected.tile.alpha=1),this.setData("pointerDown",!1)}},{key:"updateCurrent",value:function(t,e){this.grid.getBounds(this.data.values.bounds),this.setData({x:t,y:e}),Object.assign(this.data.values.current,{x:this.data.values.x,y:this.data.values.y,col:~~t,row:~~e}),this.data.values.current.tile=this.data.values.tiles[this.data.values.current.row][this.data.values.current.col]}},{key:"isHorizontalMatch",value:function(t,e){return this.a=this.tileAt(t,e),this.b=this.tileAt(t,e-1),this.c=this.tileAt(t,e-2),-1!==this.a&&-1!==this.b&&-1!==this.c&&null!==this.a&&null!==this.b&&null!==this.c&&this.a.color===this.b.color&&this.a.color===this.c.color}},{key:"isVerticalMatch",value:function(t,e){return this.a=this.tileAt(t,e),this.b=this.tileAt(t-1,e),this.c=this.tileAt(t-2,e),-1!==this.a&&-1!==this.b&&-1!==this.c&&null!==this.a&&null!==this.b&&null!==this.c&&this.a.color===this.b.color&&this.a.color===this.c.color}},{key:"isMatch",value:function(t,e){return this.isHorizontalMatch(t,e)||this.isVerticalMatch(t,e)}},{key:"matchInBoard",value:function(){for(var t=0,e=y.rows;t<e;t++)for(var n=0,o=y.columns;n<o;n++)if(this.isMatch(t,n))return!0;return!1}}])&&Vt(n.prototype,o),i&&Vt(n,i),e}(r.a.GameObjects.Container);function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ee(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ne(t,e){return(ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oe=function(t){function e(t,n){var o,r,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Quack:",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,i=te(e).call(this,t,a,s),(o=!i||"object"!==$t(i)&&"function"!=typeof i?ee(r):i).scene=t,o.registryKey=n,o.bg=t.add.image(0,0,E.main.ID,"game/ui/stat_container"),o.textAppend=c;var h=-.5*o.bg.width+20;o.value=0,o.valueChangedCallback=null;return o.labelText=t.add.bitmapText(h,4,l.uber_move_regular_black.ID,u,35).setOrigin(0,.5),o.valueText=t.add.bitmapText(h+o.labelText.width,4,l.uber_move_bold_black.ID,"".concat(o.value).concat(o.textAppend),35).setOrigin(0,.5),x(ee(o),[o.bg,o.labelText,o.valueText]),k(t,n,(function(){o.valueChangedCallback&&o.valueChangedCallback()})),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ne(t,e)}(e,Phaser.GameObjects.Container),e}();function re(t){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(t){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ae(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ce=function(t){function e(t){var n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.registry.set(f.TIME_REMAINING,t.registry.get(f.DIFFICULTY).SECONDS),o=this,r=ie(e).call(this,t,f.TIME_REMAINING,i,a,$.game.STAT_TIME_PREFIX,$.game.STAT_TIME_APPEND),n=!r||"object"!==re(r)&&"function"!=typeof r?ae(o):r,ue(ae(n),"handleValueChanged",(function(){n.value=n.scene.registry.get(n.registryKey),n.valueText.text=n.formatTime(~~n.value)})),ue(ae(n),"formatTime",(function(t){var e=~~(t/60),n=~~(t-60*e);return"".concat(e,":").concat(n<10?"0":"").concat(n)})),n.valueChangedCallback=n.handleValueChanged,n.handleValueChanged(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(e,t),e}(oe);function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function he(t){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pe(t,e){return(pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var de=function(t){function e(t){var n,o,r,i,a,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,r=he(e).call(this,t,f.MULTIPLIER,u,c,$.game.STAT_MULTIPLIER_PREFIX,$.game.STAT_MULTIPLIER_APPEND),n=!r||"object"!==le(r)&&"function"!=typeof r?fe(o):r,i=fe(n),s=function(){n.valueText.text="".concat(n.scene.registry.get(n.registryKey).toFixed(1)).concat(n.textAppend)},(a="handleValueChanged")in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,n.valueChangedCallback=n.handleValueChanged,n.handleValueChanged(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pe(t,e)}(e,t),e}(oe);function ye(t){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function me(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ve=function(t){function e(t){var n,o,r,i,a,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,r=be(e).call(this,t,f.SCORE,u,c,$.game.STAT_SCORE_PREFIX,$.game.STAT_SCORE_APPEND),n=!r||"object"!==ye(r)&&"function"!=typeof r?me(o):r,i=me(n),s=function(){n.value=n.scene.registry.get(n.registryKey),n.valueText.text=(~~n.value).toLocaleString()},(a="handleValueChanged")in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,n.valueChangedCallback=n.handleValueChanged,n.handleValueChanged(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(e,t),e}(oe);function Ee(t){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _e(t){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function we(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oe(t,e){return(Oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Te=function(t){function e(t){var n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=_e(e).call(this,t,i,a))||"object"!==Ee(r)&&"function"!=typeof r?we(o):r).scene=t;return x(we(n),[new ce(t,-340),new de(t,0),new ve(t,340)]),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oe(t,e)}(e,Phaser.GameObjects.Container),e}();function Se(t){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ie(t){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Me(t,e){return(Me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ce=function(t){function e(t){var n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=Ie(e).call(this,t,i,a))||"object"!==Se(r)&&"function"!=typeof r?Pe(o):r).scene=t,n.logos=[t.add.image(0,0,E.main.ID,"game/ui/logos/logo_0"),t.add.image(0,0,E.main.ID,"game/ui/logos/logo_1")],(F("country")||F("co")||F("c")||"us").toLowerCase()){case"ca":case"can":case"canada":case"1":n.logos.push(t.add.image(0,0,E.main.ID,"intro/logos/logo_2b"));break;default:n.logos.push(t.add.image(0,0,E.main.ID,"intro/logos/logo_2a"))}x(Pe(n),n.logos);return t.tweens.timeline({tweens:[{targets:Pe(n),duration:1e3,ease:Phaser.Math.Easing.Back.Out,props:{y:{start:n.y+27,to:n.y}}}]}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Me(t,e)}(e,Phaser.GameObjects.Container),e}();function De(t){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ae(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Re(t,e){return(Re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xe=function(t){function e(t,n,o){var r,i,a,s,u,c,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:75,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.uber_move_bold_black.ID;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,a=je(e).call(this,t,n,o,p,h,f),r=!a||"object"!==De(a)&&"function"!=typeof a?Ae(i):a,s=Ae(r),c=function(t){return void 0===r.original[t.index]&&(r.original[t.index]=t.y),t.y=(Math.cos(Date.now()/1369+(r.text.length-t.index)*r.frequency)+Math.sin(Date.now()/1e3+(r.text.length-t.index)*r.frequency))*r.amplitude+r.original[t.index],t},(u="textCallback")in s?Object.defineProperty(s,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[u]=c,r.setTint(0).setOrigin(.5),r.original={},r.frequency=.2,r.amplitude=6,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Re(t,e)}(e,Phaser.GameObjects.DynamicBitmapText),e}();function ke(t){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Le(t){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function He(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ue(t,e){return(Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ge=function(t){function e(t){var n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=Le(e).call(this,t,i,a))||"object"!==ke(r)&&"function"!=typeof r?He(o):r).scene=t,n.logos=new Ce(t,0,.0425*m.photoshop.HEIGHT),n.title=new xe(t,0,.13*m.photoshop.HEIGHT,$.game.HEADER_TITLE),n.stats=new Te(t,0,.177*m.photoshop.HEIGHT),x(He(n),[n.logos,n.title,n.stats]),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ue(t,e)}(e,Phaser.GameObjects.Container),e}();function Ne(t){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Be(t){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ye(t,e){return(Ye=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qe=function(t){function e(t){var n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=Be(e).call(this,t,i,a))||"object"!==Ne(r)&&"function"!=typeof r?Fe(o):r).images=[t.make.image({x:0,y:-.2*m.photoshop.HEIGHT,key:E.main.ID,frame:"shared/bg/white_tile",origin:{x:.5,y:0}}).setOrigin(.5,0),t.make.image({x:0,y:128,key:E.main.ID,frame:"shared/bg/pink_tile",origin:{x:.5,y:0}}),t.make.image({x:0,y:1770,key:E.main.ID,frame:"shared/bg/green_tile",origin:{x:.5,y:0}}),t.make.image({x:0,y:128,key:E.main.ID,frame:"shared/edges/edge_0",origin:{x:.5,y:0}}),t.make.image({x:0,y:379,key:E.main.ID,frame:"shared/bg/tan_tile",origin:{x:.5,y:0}}),t.make.image({x:0,y:379,key:E.main.ID,frame:"shared/edges/edge_1",origin:{x:.5,y:0}}),new q(t,0,.1*m.photoshop.HEIGHT,1900,300,3e4,2),t.make.image({x:0,y:1770,key:E.main.ID,frame:"shared/edges/edge_2",origin:{x:.5,y:0}})],n.images[0].setScale(m.photoshop.WIDTH/n.images[0].width,m.photoshop.HEIGHT/n.images[0].height),n.images[1].setScale(m.photoshop.WIDTH/n.images[1].width,254/n.images[1].height),n.images[2].setScale(m.photoshop.WIDTH/n.images[2].width,152/n.images[2].height),n.images[4].setScale(m.photoshop.WIDTH/n.images[2].width,1394/n.images[2].height),x(Fe(n),n.images),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ye(t,e)}(e,Phaser.GameObjects.Container),e}();function Xe(t){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function We(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function qe(t){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ve(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ke(t,e){return(Ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Je(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ze=function(t){function e(){var t,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=qe(e).call(this,{key:v.GAME}),t=!o||"object"!==Xe(o)&&"function"!=typeof o?Ve(n):o,Je(Ve(t),"handleTimeRemainingChanged",(function(){t.music.rate=(t.startingSeconds-t.registry.get(f.TIME_REMAINING))/(4*t.startingSeconds)+1})),Je(Ve(t),"handleMatch",(function(e,n,o,r,i){var a=h["match_".concat(e)];t.addPoints(a.POINTS*t.registry.get(f.MULTIPLIER)*n),t.addMultiplier(a.MULTIPLIER),t.registry.events.emit(p.REQUEST_SOUND,s["match_".concat(e)].ID),P.sendEvent(w["GAME_MATCH_".concat(e)],O.GAME,"tile_".concat(o.index),1)})),t.gameOver=!1,t}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ke(t,e)}(e,t),n=e,(o=[{key:"init",value:function(){this.gameOver=!1}},{key:"preload",value:function(){}},{key:"create",value:function(){var t=this;P.setScreenName(v.GAME),L(this,p.REFLOW_REQUESTED,(function(){t.dirty=!0})),this.container=this.add.container(this.cameras.main.centerX,this.cameras.main.centerY),this.background=new Qe(this,0,-m.photoshop.CENTER_Y),this.header=new Ge(this,0,-m.photoshop.CENTER_Y),this.board=new Zt(this,-.5*y.width,-.39*y.height),x(this.container,[this.background,this.header,this.board]),this.minMultiplier=this.registry.get(f.DIFFICULTY).MINIMUM_MULTIPLIER,this.startGame(),this.reflowElements(),this.addEventHandlers(),this.startCountdown(),this.registry.events.emit(p.REQUEST_MUSIC,a.game.ID),k(this,f.TIME_REMAINING,this.handleTimeRemainingChanged),this.startingSeconds=this.registry.get(f.DIFFICULTY).SECONDS}},{key:"update",value:function(t,e){if(this.finishedLoading){if(this.dirty&&this.reflowElements(),this.gameOver)return P.sendEvent(w.GAME_COMPLETE,O.GAME,"Score",this.registry.get(f.SCORE)),void this.scene.start(v.END);this.tickDownMultiplier(e)}}},{key:"shutdown",value:function(){}},{key:"startGame",value:function(){this.registry.set(f.SCORE,0),this.registry.set(f.MULTIPLIER,this.minMultiplier),this.finishedLoading=!0}},{key:"addEventHandlers",value:function(){L(this,p.MATCH,this.handleMatch)}},{key:"tickDownMultiplier",value:function(t){if(!this.music)return this.music=this.registry.get(f.MUSIC)[a.game.ID],void(this.music.rate=1);var e=this.registry.get(f.MULTIPLIER);this.registry.set(f.MULTIPLIER,Math.max(this.minMultiplier,e-e*t*.001*b.multiplierDecaySpeed))}},{key:"addPoints",value:function(t){this.registry.set(f.SCORE,~~(this.registry.get(f.SCORE)+t))}},{key:"addMultiplier",value:function(t){this.registry.set(f.MULTIPLIER,this.registry.get(f.MULTIPLIER)+t)}},{key:"reflowElements",value:function(){this.dirty=!1,this.container.setPosition(this.cameras.main.centerX,this.cameras.main.centerY),this.container.setScale(this.cameras.main.height/m.photoshop.HEIGHT)}},{key:"startCountdown",value:function(){var t=this;this.tweens.add({targets:this.registry.values,duration:1e3*this.registry.get(f.TIME_REMAINING),delay:b.timerStartDelay,onComplete:function(){t.gameOver=!0},props:{TIME_REMAINING:0}})}}])&&We(n.prototype,o),r&&We(n,r),e}(r.a.Scene);function Ze(t){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $e(t){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function en(t,e){return(en=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nn=function(t){function e(t){var n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=$e(e).call(this,t,i,a))||"object"!==Ze(r)&&"function"!=typeof r?tn(o):r).scene=t,n.logos=new rt(t,0,.055*m.photoshop.HEIGHT),n.title=new xe(t,0,330,$.summary.HEADER_TITLE),x(tn(n),[n.logos,n.title]),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&en(t,e)}(e,Phaser.GameObjects.Container),e}();function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rn(t){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function an(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sn(t,e){return(sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var un=function(t){function e(t){var n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=rn(e).call(this,t,i,a))||"object"!==on(r)&&"function"!=typeof r?an(o):r).images=[t.add.image(0,0,E.main.ID,"shared/bg/white_tile").setOrigin(.5,0),t.add.image(0,172,E.main.ID,"shared/bg/pink_tile").setOrigin(.5,0),t.add.image(0,754,E.main.ID,"shared/bg/green_tile").setOrigin(.5,0),t.add.image(0,170,E.main.ID,"shared/edges/edge_3").setOrigin(.5,0)],n.images[0].setScale(m.photoshop.WIDTH/n.images[0].width,178/n.images[0].height),n.images[1].setScale(m.photoshop.WIDTH/n.images[1].width,579/n.images[1].height),n.images[2].setScale(m.photoshop.WIDTH/n.images[2].width,1167/n.images[2].height),x(an(n),n.images),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sn(t,e)}(e,Phaser.GameObjects.Container),e}();function cn(t){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fn(t,e){return(fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pn=function(t){function e(t){var n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=ln(e).call(this,t,i,a))||"object"!==cn(r)&&"function"!=typeof r?hn(o):r).images=[t.add.image(0,-.5*m.photoshop.HEIGHT+668,E.main.ID,"summary/main_image")],x(hn(n),n.images),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fn(t,e)}(e,Phaser.GameObjects.Container),e}();function dn(t){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yn(t){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mn(t,e){return(mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gn=function(t){function e(t){var n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,r=yn(e).call(this,t,i,a),(n=!r||"object"!==dn(r)&&"function"!=typeof r?bn(o):r).displayedScore=0,n.yourScoreText=t.add.bitmapText(0,0,l.uber_move_regular_black.ID,$.summary.YOUR_SCORE,50).setOrigin(.5),n.scoreText=t.add.bitmapText(0,.058*m.photoshop.HEIGHT,l.uber_move_bold_black.ID,0,150).setOrigin(.5),x(bn(n),[n.yourScoreText,n.scoreText]),t.tweens.add({targets:bn(n),duration:2e3,props:{displayedScore:t.registry.get(f.SCORE)},onUpdate:function(){n.scoreText.text=(~~n.displayedScore).toLocaleString()}}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mn(t,e)}(e,Phaser.GameObjects.Container),e}();function vn(t){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function En(t){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wn(t,e){return(wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var On=function(t){function e(t){var n,o,r,a,s,u,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,r=En(e).call(this,t,c,l),n=!r||"object"!==vn(r)&&"function"!=typeof r?_n(o):r,a=_n(n),u=function(){n.creditsIndex=Phaser.Math.Wrap(n.creditsIndex+1,0,n.creditsList.length);var t=n.scene.add.text(n.scene.cameras.main.width*Phaser.Math.FloatBetween(.4,.6),n.scene.cameras.main.height*Phaser.Math.FloatBetween(.2,.6),n.creditsList[n.creditsIndex],{fontFamily:"Arial Black",fontSize:74,color:Phaser.Utils.Array.GetRandom(n.colors)}).setOrigin(.5).setStroke("#000000",4).setShadow(1,1,"#000000",5,!0,!1).setAlpha(0).setRotation(Math.PI*Phaser.Math.FloatBetween(-.12,.12)),e=Phaser.Math.Between(1500,2500);n.scene.tweens.timeline({targets:t,onComplete:function(){t.destroy()},tweens:[{duration:e,ease:Phaser.Math.Easing.Linear,props:{rotation:Math.PI*Phaser.Math.FloatBetween(-.12,.12)}},{offset:0,duration:e*Phaser.Math.FloatBetween(.05,.15),ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{from:0,to:1}}},{offset:.8*e,duration:.2*e,ease:Phaser.Math.Easing.Linear,props:{alpha:{from:1,to:0}}},{offset:0,duration:e,ease:Phaser.Math.Easing.Back.Out,props:{x:n.scene.cameras.main.width*Phaser.Math.FloatBetween(.4,.6),y:n.scene.cameras.main.height*Phaser.Math.FloatBetween(.2,.6)}},{offset:0,duration:.3*e,ease:Phaser.Math.Easing.Quadratic.Out,props:{scale:{start:0,to:1}}},{offset:.8*e,duration:.2*e,ease:Phaser.Math.Easing.Quadratic.In,props:{scale:{from:1,to:0}}}]})},(s="requestEasterEgg")in a?Object.defineProperty(a,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[s]=u,n.creditsList=Phaser.Utils.Array.StableSort(i),n.creditsIndex=0,n.colors=["#ff9999","#99ff99","#9999ff","#ff99ff","#ffff99","#99ffff"],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wn(t,e)}(e,Phaser.GameObjects.Container),e}();function Tn(t){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function In(t){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mn(t,e){return(Mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Dn=function(t){function e(){var t,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=In(e).call(this,{key:v.END}),t=!o||"object"!==Tn(o)&&"function"!=typeof o?Pn(n):o,Cn(Pn(t),"handleGameRequested",(function(e){P.sendEvent("summary_".concat(e.ID),O.SUMMARY),t.registry.set(f.DIFFICULTY,e),t.scene.start(v.GAME)})),Cn(Pn(t),"handleClickCta0",(function(t){P.sendEvent(w.SUMMARY_CTA_0,O.SUMMARY),window.open(u.UBER_EATS_CTA,"_blank")||(window.location.href=u.UBER_EATS_CTA)})),t}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mn(t,e)}(e,Phaser.Scene),n=e,(o=[{key:"create",value:function(){var t=this;P.setScreenName(v.END),L(this,p.REFLOW_REQUESTED,(function(){t.dirty=!0})),L(this,p.GAME_REQUESTED,this.handleGameRequested),this.container=this.add.container(this.cameras.main.centerX,this.cameras.main.centerY),this.bg=new un(this,0,-m.photoshop.CENTER_Y),this.snowEmitter=new q(this,0,200-m.photoshop.CENTER_Y,2400,350,3e4,2).setAlpha(.7),this.header=new nn(this,0,-m.photoshop.CENTER_Y),this.endImage=new pn(this,0,.12*m.photoshop.HEIGHT),this.endScore=new gn(this,0,-.27*m.photoshop.HEIGHT),this.footerText=this.add.bitmapText(0,.17*m.photoshop.HEIGHT,l.uber_move_regular.ID,$.summary.FOOTER_TEXT,90,1).setTint(16183530).setOrigin(.5),this.dealTextA=this.add.bitmapText(0,.32*m.photoshop.HEIGHT,l.uber_move_regular.ID,$.summary.FOOTER_DEAL_TEXT,45,1).setTint(16183530).setOrigin(.5),this.dealTextB=this.add.bitmapText(0,.36*m.photoshop.HEIGHT,l.uber_move_regular.ID,$.summary.FOOTER_DEAL_SUBTEXT,30,1).setTint(16183530).setOrigin(.5),this.easterEgg=new On(this,-.051*m.photoshop.WIDTH,-.314*m.photoshop.HEIGHT),this.buttons=new yt(this,0,.24*m.photoshop.HEIGHT),this.cta0=new ct(this,0,.42*m.photoshop.HEIGHT,$.summary.CTA_0,this.handleClickCta0,"shared/bg/cta_0",null,50,60,5),x(this.container,[this.bg,this.snowEmitter,this.header,this.footerText,this.dealTextA,this.dealTextB,this.endImage,this.endScore,this.easterEgg,this.buttons,this.cta0]),this.reflowElements(),this.registry.events.emit(p.REQUEST_MUSIC,a.summary.ID),this.tweens.timeline({tweens:[{offset:200,targets:this.header.title,duration:1e3,ease:Phaser.Math.Easing.Back.Out,props:{x:{start:this.header.title.x-50,to:this.header.title.x}}},{targets:this.header.title,offset:200,duration:800,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:0,to:1}}},{targets:this.endScore,offset:400,duration:1e3,ease:Phaser.Math.Easing.Back.Out,props:{x:{start:this.endScore.x+50,to:this.endScore.x}}},{targets:this.endScore,offset:400,duration:800,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:0,to:1}}},{targets:this.footerText,offset:600,duration:1e3,ease:Phaser.Math.Easing.Back.Out,props:{y:{start:this.footerText.y-50,to:this.footerText.y}}},{targets:this.footerText,offset:600,duration:800,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:0,to:1}}},{targets:this.cta0,offset:1e3,duration:1e3,ease:Phaser.Math.Easing.Quadratic.Out,props:{y:{start:this.cta0.y+50,to:this.cta0.y}}},{targets:this.cta0,offset:1e3,duration:800,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:0,to:1}}},{targets:this.dealTextA,offset:1100,duration:800,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:0,to:1}}},{targets:this.dealTextB,offset:1200,duration:800,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:0,to:1}}}]})}},{key:"update",value:function(t,e){this.dirty&&(this.reflowElements(),this.dirty=!1)}},{key:"reflowElements",value:function(){this.dirty=!1,this.container.setPosition(this.cameras.main.centerX,this.cameras.main.centerY),this.container.setScale(this.cameras.main.height/m.photoshop.HEIGHT)}}])&&Sn(n.prototype,o),r&&Sn(n,r),e}();function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function An(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Rn(t){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kn(t,e){return(kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ln(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Hn=function(t){function e(t){var n,o,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,r=Rn(e).call(this,t,i,a),n=!r||"object"!==jn(r)&&"function"!=typeof r?xn(o):r,Ln(xn(n),"toggleMute",(function(t){n.scene.registry.set(f.MUTED,!n.scene.registry.get(f.MUTED))})),Ln(xn(n),"handleMuteChanged",(function(){n.scene.registry.events.emit(p.REQUEST_SOUND,s.tap.ID),n.setMute(n.scene.registry.get(f.MUTED))})),n.unmutedImage=t.add.image(0,0,E.main.ID,"shared/audio/unmuted").setOrigin(1,0),n.mutedImage=t.add.image(0,0,E.main.ID,"shared/audio/muted").setInteractive({useHandCursor:!0}).setOrigin(1,0),n.mutedImage.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,n.handlePointerUp,xn(n)),k(t,f.MUTED,n.handleMuteChanged),x(xn(n),[n.unmutedImage,n.mutedImage]),n.setMute("true"===localStorage.getItem(f.MUTED)),n}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kn(t,e)}(e,Phaser.GameObjects.Container),n=e,(o=[{key:"handlePointerUp",value:function(t,e,n,o){this.toggleMute(o),P.sendEvent(this.scene.registry.get(f.MUTED)?w.MUTE_ON:w.MUTE_OFF,O.SHARED)}},{key:"setMute",value:function(t){localStorage.setItem(f.MUTED,t),this.scene.tweens.add({duration:250,ease:Phaser.Math.Easing.Quadratic.InOut,targets:this.unmutedImage,props:{alpha:t?0:1}})}}])&&An(n.prototype,o),r&&An(n,r),e}();function Un(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gn=function t(e){var n=this;for(var o in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Un(this,"requestMusic",(function(t){for(var e in a)n.music[a[e].ID].pause();requestAnimationFrame((function(){n.music[t].rate=1,n.music[t].play({loop:!0})}))})),Un(this,"requestSound",(function(t){n.sounds[t].play({seek:0})})),Un(this,"handleMutedChanged",(function(){n.scene.sound.mute=n.scene.registry.get(f.MUTED)})),this.scene=e,this.music={},this.sounds={},a)this.music[a[o].ID]=e.sound.add(a[o].ID);for(var r in s)this.sounds[s[r].ID]=e.sound.add(s[r].ID);L(e,p.REQUEST_MUSIC,this.requestMusic),L(e,p.REQUEST_SOUND,this.requestSound),e.sound.mute="true"===localStorage.getItem(f.MUTED),k(e,f.MUTED,this.handleMutedChanged),e.registry.set(f.MUSIC,this.music),e.registry.set(f.SOUNDS,this.sounds)};function Nn(t){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Fn(t,e){return!e||"object"!==Nn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yn(t){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qn(t,e){return(Qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Fn(this,Yn(e).call(this,{key:v.GLOBAL}))).dirty=!0,t.padding=20,t}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qn(t,e)}(e,Phaser.Scene),n=e,(o=[{key:"create",value:function(){var t=this;this.centeredContainer=this.add.container(0,0),this.alAudioManager=new Gn(this),L(this,p.REFLOW_REQUESTED,(function(){t.dirty=!0})),this.muteBtn=new Hn(this),this.registry.events.emit(p.REQUEST_MUSIC,a.intro.ID),this.leftCover=this.add.image(-.5*m.photoshop.WIDTH,0,E.main.ID,"shared/bg/white_tile").setOrigin(1,.5).setTint(65793),this.rightCover=this.add.image(.5*m.photoshop.WIDTH,0,E.main.ID,"shared/bg/white_tile").setOrigin(0,.5).setTint(65793),this.leftCover.setScale(1e4/this.leftCover.width),this.rightCover.setScale(1e4/this.leftCover.width),x(this.centeredContainer,[this.leftCover,this.rightCover]),x(this,[this.muteBtn])}},{key:"update",value:function(){this.dirty&&this.reflowElements()}},{key:"reflowElements",value:function(){this.dirty=!1,this.centeredContainer.setScale(this.cameras.main.height/m.photoshop.HEIGHT),this.centeredContainer.setPosition(this.cameras.main.centerX,this.cameras.main.centerY),this.muteBtn.setScale(this.cameras.main.height/m.photoshop.HEIGHT),this.muteBtn.setPosition(this.cameras.main.centerX+Math.min(this.cameras.main.centerX,.5*m.photoshop.WIDTH*this.muteBtn.scale)-this.padding,this.padding)}}])&&Bn(n.prototype,o),r&&Bn(n,r),e}();function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qn(t,e){return!e||"object"!==Wn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vn(t){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kn(t,e){return(Kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(g,{scene:[R,It,ze,Dn,Xn]}),qn(this,Vn(e).call(this,g))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kn(t,e)}(e,t),e}(r.a.Game);navigator.userAgent.indexOf("MSIE ")>=0?(document.body.innerHTML="<a href='https://www.google.com/chrome/'><img style='display: block; margin-left: auto; margin-right: auto; max-height: 100vh; border: 0;' src='assets/images/unsupported-browser.jpg'></a>",document.body.style.backgroundColor="white"):window.game=new Jn}});