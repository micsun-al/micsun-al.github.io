<html>

<head>
</head>

<body>
    <div class="wrapper">
        <canvas id="canvas" width=376 height=370></canvas>
    </div>
    <script>
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var cw = canvas.width;
        var ch = canvas.height;
        var cx = cw / 2;
        var cy = ch / 2;
        var loadedCount = 0;

        var bg = new Image();
        bg.onload = start;
        bg.src = "game_timer_circle_00000.png";
        var fg = new Image();
        fg.onload = start;
        fg.src = "game_timer_circle_00095.png";

        function start() {
            if(loadedCount++ > 0){
                requestAnimationFrame(animate);
            }
        }

        function animate(time) {
            draw((Math.sin(new Date().getTime() / 1000) + 1) * 0.5);
            requestAnimationFrame(animate);
        }

        function draw(scalar) {
            var endRadians = -Math.PI / 2 + Math.PI * 2 * scalar;
            ctx.clearRect(0, 0, cw, ch);
            ctx.drawImage(bg, cx - bg.width / 2, cx - bg.height / 2);
            ctx.beginPath();
            ctx.arc(cx, cy, 376 / 2, -Math.PI / 2, endRadians);
            ctx.lineTo(cx, cy);
            ctx.save();
            ctx.clip();
            ctx.drawImage(fg, cx - fg.width / 2, cx - fg.height / 2);
            ctx.restore();
        }
    </script>
</body>

</html>